<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Flutterç®€ä»‹åŠçŽ¯å¢ƒé…ç½®]]></title>
    <url>%2F2018%2F12%2F05%2FFlutter%E7%AE%80%E4%BB%8B%E5%8F%8A%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;å·å¤–ï¼å·å¤–ï¼åœ¨æ˜¨æ™šçš„ Flutter Live 2018 ä¸Šï¼ŒGoogle å®£å¸ƒ Flutter 1.0 æ­£å¼å‘å¸ƒã€‚ä»Šå¤©æ—©ä¸Šä¸€èµ·æ¥çœ‹è§è¿™ä¸ªä¿¡æ¯ï¼Œå§æ§½åˆè¦å¼€å§‹å­¦ä¸€é—¨æ–°çš„å¼€å‘æŠ€æœ¯äº†ã€‚&emsp;&emsp;ä»Žæˆ‘ä»¬é¦–æ¬¡çœ‹åˆ° Flutter çš„ Beta æµ‹è¯•ç‰ˆï¼Œåˆ°å¦‚ä»Šçš„ 1.0 æ­£å¼ç‰ˆï¼Œæ€»å…±ç»è¿‡äº† 9ä¸ªå¤šæœˆã€‚ 2 æœˆåº•åœ¨ä¸–ç•Œç§»åŠ¨å¤§ä¼š (MWC) ä¸Šå‘å¸ƒé¦–ä¸ª Beta ç‰ˆ; 5 æœˆçš„ Google I/O å¤§ä¼šä¸Šå‘å¸ƒ Beta 3 ; 6 æœˆåº•çš„ GMTC å‘å¸ƒé¦–ä¸ªé¢„è§ˆç‰ˆï¼› 9 æœˆçš„è°·æ­Œè€…å¤§ä¼šä¸Šï¼Œå‘å¸ƒé¢„è§ˆç‰ˆ 2ï¼› 12æœˆåˆçš„ Flutter Live 2018 ä¸Šï¼Œå‘å¸ƒ1.0 ç¨³å®šç‰ˆã€‚ &emsp;&emsp;Flutter 1.0 ä¸»è¦èšç„¦äºŽç¨³å®šæ€§å’Œ bug ä¿®å¤ï¼ŒåŒæ—¶è¿˜åŒ…å«ä¸¤é¡¹æ–°åŠŸèƒ½çš„é¢„è§ˆ â€”â€” Add to App å’Œ platform viewsã€‚ &emsp;&emsp;é“ºåž«äº†è¿™ä¹ˆå¤šï¼Œå¯èƒ½æœ‰äº›åŒå­¦è¿˜æ˜¯ä¸çŸ¥é“Flutteråˆ°åº•æ˜¯ä¸ªä»€ä¹ˆçŽ©æ„ã€‚ä¸‹é¢å°±æ˜¯æ•²é»‘æ¿åˆ’é‡ç‚¹çš„æ—¶å€™äº†ã€‚&emsp;&emsp;Flutteræ˜¯è°·æ­Œçš„ç§»åŠ¨UIæ¡†æž¶ï¼Œå¯ä»¥å¿«é€Ÿåœ¨iOSå’ŒAndroidä¸Šæž„å»ºé«˜è´¨é‡çš„åŽŸç”Ÿç”¨æˆ·ç•Œé¢ã€‚ Flutterå¯ä»¥ä¸ŽçŽ°æœ‰çš„ä»£ç ä¸€èµ·å·¥ä½œã€‚åœ¨å…¨ä¸–ç•Œï¼ŒFlutteræ­£åœ¨è¢«è¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…å’Œç»„ç»‡ä½¿ç”¨ï¼Œå¹¶ä¸”Flutteræ˜¯å®Œå…¨å…è´¹ã€å¼€æºçš„ã€‚é…åˆDartè¯­è¨€å’ŒFlutterçš„çƒ­é‡è½½ï¼Œå¯å¸®åŠ©æ‚¨å¿«é€Ÿåœ°è¿›è¡Œæµ‹è¯•ã€æž„å»ºUIã€æ·»åŠ åŠŸèƒ½å¹¶æ›´å¿«åœ°ä¿®å¤é”™è¯¯ã€‚åœ¨iOSå’ŒAndroidæ¨¡æ‹Ÿå™¨æˆ–çœŸæœºä¸Šå¯ä»¥åœ¨äºšç§’å†…é‡è½½ï¼Œå¹¶ä¸”ä¸ä¼šä¸¢å¤±çŠ¶æ€ã€‚ çŽ°åœ¨å°±è¯•è¯•Flutterï¼Œå…¥é—¨å¾ˆç®€å•ï¼Flutterå®˜ç½‘ å¼€å‘çŽ¯å¢ƒé…ç½® èŽ·å–Flutter SDK åŽ»flutterå®˜ç½‘ä¸‹è½½å…¶æœ€æ–°å¯ç”¨çš„å®‰è£…åŒ…ç‚¹å‡»ä¸‹è½½ ç›´æŽ¥åœ¨githubä¸Šä¸‹è½½ git clone -b master https://github.com/flutter/flutter.git å°†å®‰è£…åŒ…zipè§£åŽ‹åˆ°ä½ æƒ³å®‰è£…Flutter SDKçš„è·¯å¾„ï¼ˆå¦‚ï¼šC:\src\flutterï¼›æ³¨æ„ï¼Œä¸è¦å°†flutterå®‰è£…åˆ°éœ€è¦ä¸€äº›é«˜æƒé™çš„è·¯å¾„å¦‚C:\Program Files\ï¼‰ã€‚ é…ç½®flutterçš„çŽ¯å¢ƒå˜é‡ï¼Œè®²flutterçš„binæ–‡ä»¶å¤¹çš„ç»å¯¹è·¯å¾„é…ç½®åˆ°pathä¸­ï¼Œåœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œflutter-h ï¼Œå¦‚æžœå‡ºçŽ°ä¸‹å›¾ï¼Œå®‰è£…æˆåŠŸã€‚ å®‰è£…JDK å¦‚æžœæ²¡æœ‰æ­è¿‡JAVAçŽ¯å¢ƒçš„åŒå­¦çœ‹ä¸€ä¸‹ï¼Œä¹‹å‰æ­è¿‡çš„ç›´æŽ¥çœ‹ä¸‹ä¸€æ­¥ã€‚ åŽ»oracleç½‘ç«™ä¸‹è½½å°±okJDKä¸‹è½½ ä¸‹è½½å®ŒæˆåŽç›´æŽ¥å®‰è£…ï¼Œä¸­é€”ä¼šå®‰è£…jreï¼Œè®°ä½è‡ªå·±å®‰è£…çš„è·¯å¾„ã€‚ å®‰è£…å®ŒæˆåŽé…ç½®çŽ¯å¢ƒå˜é‡ã€‚æ–°å»ºçŽ¯å¢ƒå˜é‡JAVA_HOMEï¼Œå°†jdkæ–‡ä»¶å¤¹çš„è·¯å¾„é…ä¸ŠåŽ»åœ¨PathåŽæ–°å¢žä¸¤å¤©å±žæ€§ï¼Œå°†jdkæ–‡ä»¶å¤¹ä¸­çš„bin å’Œbinä¸‹çš„jreè·¯å¾„é…ä¸Šã€‚ åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥java -versionï¼Œå‡ºçŽ°ä¸‹é¢çš„ä¸œè¥¿å°±æ˜¯æˆåŠŸäº†ã€‚ å®‰è£…Android Studio å¼€å‘çŽ¯å¢ƒéœ€è¦Android Studioçš„ä¸€äº›é…ç½®ï¼Œç›´æŽ¥åŽ»å®˜ç½‘ä¸‹è½½å³å¯ã€‚æ³¨æ„å®‰è£…çš„æ—¶å€™ä¸è¦æœ‰ä¸­æ–‡è·¯å¾„å’Œç©ºæ ¼ï¼Œä¼šæŠ¥èŽ«åå¥‡å¦™çš„é”™ï¼ ç¬¬ä¸€æ¬¡å¯åŠ¨Android Studio,ä¼šå‡ºçŽ°ä¸‹å›¾ï¼Œç‚¹åŽ»cancelï¼Œè¿›å…¥ä¸‹è½½ä¾èµ–çš„çŽ¯èŠ‚ï¼Œè¿™æ—¶å€™éœ€è¦ç§‘å­¦ä¸Šç½‘ï¼Œå¦åˆ™å®‰è£…é€Ÿåº¦è´¼æ…¢ï¼Œç½‘ä¸Šå·¥å…·å¤šçš„æ˜¯ï¼Œå¹²å°±çŽ©äº‹äº†ã€‚ ä¸‹è½½å®ŒæˆåŽï¼Œæ‰¾åˆ°ä¸‹å›¾çš„é€‰é¡¹ï¼Œä¸‹è½½ä¸¤ä¸ªæ’ä»¶ï¼ŒFlutterå’ŒDart è¿žæŽ¥è°ƒè¯•è®¾å¤‡ å¯ä»¥ä½¿ç”¨çœŸæœºæµ‹è¯• å¯ä»¥åŽ»ç½‘ä¸Šå®‰è£…ä¸€äº›å®‰å“æ¨¡æ‹Ÿå™¨ï¼Œä½Žé…ç‰ˆé›·ç”µå®‰å“æ¨¡æ‹Ÿå™¨,ç®€å•æ— è„‘ï¼Œä¸“ä¸šç‰ˆGenymotionï¼Œéœ€è¦ä¸€äº›é…ç½®ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚ æœ€åŽæ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼Œæ£€æµ‹çŽ¯å¢ƒæ˜¯å¦ç¬¦åˆæ¡ä»¶ flutter doctor å¦‚æžœå‡ºçŽ°ä¸‹é¢çš„å‘½ä»¤ï¼Œokå¯ä»¥è¿›è¡Œæœ€åŽä¸€æ­¥äº†ã€‚ åˆ›å»ºé¡¹ç›®ï¼Œå¯åŠ¨flutterï¼ æ‰§è¡Œåˆ›å»ºé¡¹ç›®çš„å‘½ä»¤ flutter create ä½ çš„é¡¹ç›®åcd é¡¹ç›®åflutter run æœ‰äº›äººç¬¬ä¸€æ¬¡ç¼–è¯‘å¯èƒ½ä¼šå¾ˆå¿«ï¼Œæœ‰äº›äººè¿æ°”ä¸å¤§å¥½ï¼Œå¯èƒ½æ…¢å¾ˆå¤šæˆåŠŸæˆªå›¾ æ¨¡æ‹Ÿå™¨ä¸Šçš„æˆªå›¾ é…ç½®çŽ¯å¢ƒä¸­é‡åˆ°çš„é—®é¢˜ åˆ›å»ºé¡¹ç›®å¡åœ¨ç¬¬ä¸€æ­¥ï¼Œä¸€ç›´ä¸ä¼šåŠ¨ è§£å†³åŠžæ³•ï¼šéœ€è¦é…ç½®ä¸¤ä¸ªçŽ¯å¢ƒå˜é‡ï¼Œè®¾ç½®ä¸€ä¸‹æºã€‚ åœ¨ç”¨æˆ·å˜é‡ä¸­åˆ›å»ºPUB_HOSTED_URL ï¼Œå€¼ä¸ºhttps://pub.flutter-io.cn åœ¨ç”¨æˆ·å˜é‡ä¸­åˆ›å»ºFLUTTER_STORAGE_BASE_URLï¼Œå€¼ä¸ºhttps://storage.flutter-io.cn Android SDKä¸‹è½½æ…¢è§£å†³åŠžæ³•ï¼šå¯ä»¥å…ˆåŽ»ç™¾åº¦äº‘ç›˜æˆ–è€…æŸäº›ç½‘ç«™ä¸‹è½½ä¸€ä¸ªï¼Œè¿™æ ·è¿›è¡Œå¤–ç½‘å®‰è£…çš„æ—¶å€™ï¼Œå¯ä»¥å‡å°‘ä¸€ç‚¹æ—¶é—´ã€‚ æ€»ç»“&emsp;&emsp;æ€»çš„æ¥è¯´æ­å»ºè¿™ä¸ªçŽ¯å¢ƒè¿˜æ˜¯è›®ç®€å•çš„ï¼Œå‰ææ˜¯æœ‰ä¸€ä¸ªç¨³å®šçš„ç½‘ï¼Œä»Šå¤©çš„ç½‘çœŸçš„æ˜¯æ— è¯­äº†ï¼Œå®‰è£…sdkç›´æŽ¥retryä¸‰æ¬¡ã€‚æŽ¥ä¸‹æ¥å°±æ˜¯çœ‹å®˜ç½‘æ–‡æ¡£ï¼Œå­¦ä¹ è¿™äº›æ–°çš„éƒ¨ä»¶å’Œè¯­æ³•äº†ã€‚å¯¹äºŽmacç”µè„‘çš„é…ç½®ç­‰æˆ‘æœ‰äº†macå†è¯´å§ï¼Œå¤ªçœŸå®žäº†ã€‚]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¬æˆ‘å¹é€¼ä¹‹Redux æºç è§£è¯»ï¼ˆä¸€ï¼‰]]></title>
    <url>%2F2018%2F12%2F02%2FRedux%20%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;Redux æ˜¯ JavaScript çŠ¶æ€å®¹å™¨ï¼Œæä¾›å¯é¢„æµ‹åŒ–çš„çŠ¶æ€ç®¡ç†ã€‚ä¸ä»…å¯ä»¥è®©ä½ æž„å»ºä¸€è‡´åŒ–çš„åº”ç”¨ï¼Œè¿˜æä¾›è¶…çˆ½çš„å¼€å‘ä½“éªŒï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ªæ—¶é—´æ—…è¡Œè°ƒè¯•å™¨å¯ä»¥ç¼–è¾‘åŽå®žæ—¶é¢„è§ˆã€‚Redux ç”± Flux æ¼”å˜è€Œæ¥ï¼Œä½†å— Elm çš„å¯å‘ï¼Œé¿å¼€äº† Flux çš„å¤æ‚æ€§ã€‚ ä¸ç®¡ä½ æœ‰æ²¡æœ‰ä½¿ç”¨è¿‡å®ƒä»¬ï¼Œåªéœ€å‡ åˆ†é’Ÿå°±èƒ½ä¸Šæ‰‹ Reduxã€‚&emsp;&emsp;ä½†æ˜¯å°±æ˜¯è¿™ä¹ˆä¸ªçŽ©æ„ï¼Œæºä»£ç ç«Ÿç„¶åªæœ‰çŸ­çŸ­600è¡Œï¼Œä»Šå¤©å°±å¸¦ä½ ä¸€å±‚ä¸€å±‚è¤ªåŽ»å¥¹çš„è¡£ç‰©ï¼Œæ»¡è¶³ä½ æœ€åŽŸå§‹çš„å†²åŠ¨ã€‚ç³»å¥½å®‰å…¨å¸¦ï¼Œè€å¸æœºè¦å‘è½¦äº†ï¼ï¼ï¼ å…¥å£æ–‡ä»¶è§£è¯»&emsp;&emsp;çœ‹æºç æœ€ç®€å•çš„æ–¹å¼ï¼Œå°±æ˜¯ä»Žå…¥å£æ–‡ä»¶æ¥çœ‹ï¼Œçœ‹å®ƒä¾èµ–å“ªäº›æ¨¡å—ï¼Œç„¶åŽåœ¨ä¾æ¬¡çœ‹è¿™äº›æ¨¡å—çš„å†…å®¹ï¼Œæœ€åŽä¹Ÿå°±å¯¹æ•´ä¸ªä»£ç æœ‰ä¸ªæ¸…æ™°çš„è®¤è¯†äº†ã€‚ 12345678910111213141516171819202122232425262728293031323334353637import createStore from './createStore'import combineReducers from './combineReducers'import bindActionCreators from './bindActionCreators'import applyMiddleware from './applyMiddleware'import compose from './compose'import warning from './utils/warning'import __DO_NOT_USE__ActionTypes from './utils/actionTypes'/* * This is a dummy function to check if the function name has been altered by minification. * If the function has been minified and NODE_ENV !== 'production', warn the user. */// å°±æ˜¯æ ¹æ® isCrushed æ˜¯å¦è¢«åŽ‹ç¼©äº†ï¼Œæ¥è­¦å‘Šå¼€å‘è€…æ­£åœ¨éžç”Ÿäº§çŽ¯å¢ƒä½¿ç”¨ä¸€ä¸ªåŽ‹ç¼©è¿‡çš„ä»£ç ã€‚function isCrushed() &#123;&#125;if ( process.env.NODE_ENV !== 'production' &amp;&amp; typeof isCrushed.name === 'string' &amp;&amp; isCrushed.name !== 'isCrushed') &#123; warning( 'You are currently using minified code outside of NODE_ENV === "production". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.' )&#125;export &#123; createStore, combineReducers, bindActionCreators, applyMiddleware, compose, __DO_NOT_USE__ActionTypes&#125; å¾ˆæ˜Žæ˜¾è¿™ä¸ªå…¥å£æ–‡ä»¶å°±æ˜¯å°†è¿™äº›æ¨¡å—å¼•å…¥åŽç„¶åŽç›´æŽ¥æš´éœ²å‡ºåŽ»ã€‚æ•´ä¸ªReduxå°±æ˜¯ä¾èµ–è¿™äº›æ¨¡å—ï¼Œå…¶ä¸­å‡ ä¸ªä¹Ÿæ˜¯è€é¢å­”äº†ã€‚ createStore combineReducers bindActionCreators applyMiddleware compose warning createStoreè¿™ä¸ªæ¨¡å—æ¯æ¬¡éƒ½åœ¨ä½¿ç”¨ï¼Œç”¨æ¥åˆ›å»ºæ•´ä¸ªåº”ç”¨çš„storeã€‚ import { createStore } from â€˜reduxâ€™let store = createStore(reducers) è¿™ä¸ªæ¨¡å—ä¾èµ–çš„éƒ½æ˜¯ä¸€äº›å·¥å…·å‡½æ•°12import ActionTypes from './utils/actionTypes'import isPlainObject from './utils/isPlainObject' ActionTypesçš„æºç ä¸»è¦ç”Ÿæˆä¸€ä¸ªéšæœºå­—ç¬¦ä¸²ï¼Œç”¨æ¥åˆå§‹åŒ–æ¯ä¸ªreducerçš„å‘½å1234567891011121314const randomString = () =&gt; Math.random() .toString(36) .substring(7) .split('') .join('.')const ActionTypes = &#123; INIT: `@@redux/INIT$&#123;randomString()&#125;`, REPLACE: `@@redux/REPLACE$&#123;randomString()&#125;`, PROBE_UNKNOWN_ACTION: () =&gt; `@@redux/PROBE_UNKNOWN_ACTION$&#123;randomString()&#125;`&#125;export default ActionTypes isPlainObjectçš„æºç ä¸»è¦ç”¨æ¥åˆ¤æ–­æ˜¯å¦ä¸ºä¸€ä¸ªå­—é¢é‡çš„å¯¹è±¡ï¼Œç”¨æ¥åˆ¤æ–­stateæ˜¯å¦æœ‰æ•ˆã€‚12345678910export default function isPlainObject(obj) &#123; if (typeof obj !== 'object' || obj === null) return false let proto = obj while (Object.getPrototypeOf(proto) !== null) &#123; proto = Object.getPrototypeOf(proto) &#125; return Object.getPrototypeOf(obj) === proto&#125; createStoreçš„æºç ä¸»è¦å®žçŽ°äº†5ä¸ªæ–¹æ³• 12345678910111213141516171819202122232425262728293031323334353637383940export default function createStore(reducer, preloadedState, enhancer) &#123; if ( (typeof preloadedState === 'function' &amp;&amp; typeof enhancer === 'function') || (typeof enhancer === 'function' &amp;&amp; typeof arguments[3] === 'function') ) &#123; throw new Error( 'It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function' ) &#125; if (typeof preloadedState === 'function' &amp;&amp; typeof enhancer === 'undefined') &#123; enhancer = preloadedState preloadedState = undefined &#125; if (typeof enhancer !== 'undefined') &#123; if (typeof enhancer !== 'function') &#123; throw new Error('Expected the enhancer to be a function.') &#125; return enhancer(createStore)(reducer, preloadedState) &#125; if (typeof reducer !== 'function') &#123; throw new Error('Expected the reducer to be a function.') &#125; //somethings return &#123; dispatch, subscribe, getState, replaceReducer, [$$observable]: observable &#125;&#125; å‚æ•°ï¼š reducerï¼š reducerå¿…é¡»æ˜¯ä¸€ä¸ªfunctionç±»åž‹ï¼Œæ­¤æ–¹æ³•æ ¹æ®action.typeæ›´æ–°state preloadedStateï¼š store treeåˆå§‹å€¼ enhancerï¼š enhanceré€šè¿‡æ·»åŠ middlewareï¼Œå¢žå¼ºstoreåŠŸèƒ½ å®žçŽ°æ–¹æ³• dispatchï¼šåˆ†å‘action subscribeï¼šæ³¨å†Œlistenerï¼Œç›‘å¬stateå˜åŒ– getStateï¼šè¯»å–store treeä¸­æ‰€æœ‰state replaceReucerï¼šæ›¿æ¢reducerï¼Œæ”¹å˜stateæ›´æ–°é€»è¾‘ [$$observable] è®©å˜é‡å¯è§‚å¯Ÿã€‚ä¸€èˆ¬æƒ…å†µä¸‹ç”¨ä¸åˆ°ï¼Œç”¨åˆ°äº†æˆ‘ä¹Ÿä¸èƒŒé”…å“¦ ç¬¬ä¸€ä¸ª if è¯­å¥çš„æ„æ€å°±æ˜¯è¯´ï¼Œå¦‚æžœåªä¼ å…¥äº†ä¸¤ä¸ªå‚æ•°ï¼Œä¸”ç¬¬äºŒä¸ªå‚æ•° preloadedState ä¸ºå‡½æ•°ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºç¬¬äºŒä¸ªå‚æ•°ä¸º enhancer . ç¬¬äºŒä¸ª if è¯­å¥ç¡®ä¿ enhancer æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”å½“ enhancer ä½œä¸ºå‚æ•°ä¼ å…¥çš„æ—¶å€™ï¼Œè¿”å›ž enhancer(createStore)(reucer, preloadedState) ä½œä¸º createStore çš„è¿”å›žï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦çš„ store. ç¬¬ä¸‰ä¸ª if è¯­å¥ç¡®ä¿ reducer æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ æŽ¥ä¸‹æ¥è§£è¯»æ¯ä¸ªæ–¹æ³•çš„å…·ä½“å®žçŽ°ã€‚ getState 1234567891011function getState() &#123; if (isDispatching) &#123; throw new Error( 'You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.' ) &#125; return currentState &#125; è¿™ä¸ªå‡½æ•°å¯ä»¥èŽ·å–å½“å‰çš„çŠ¶æ€ï¼ŒcreateStore ä¸­çš„ currentState å‚¨å­˜å½“å‰çš„çŠ¶æ€æ ‘ï¼Œè¿™æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œè¿™ä¸ªå‚æ•°ä¼šæŒä¹…å­˜åœ¨ï¼Œå¹¶ä¸”æ‰€æœ‰çš„æ“ä½œçŠ¶æ€éƒ½æ˜¯æ”¹å˜è¿™ä¸ªå¼•ç”¨ï¼ŒgetState å‡½æ•°è¿”å›žå½“å‰çš„ currentStateã€‚å¦‚æžœå½“å‰çŠ¶æ€ä¸å­˜åœ¨ï¼Œå¯èƒ½æ˜¯æ²¡æœ‰è¿”å›žåˆå§‹åŒ–çš„stateï¼Œä¼šæŠ¥é”™ã€‚ subscribe 1234567891011121314151617181920212223242526272829303132333435363738function subscribe(listener) &#123; if (typeof listener !== 'function') &#123; throw new Error('Expected the listener to be a function.') &#125; if (isDispatching) &#123; throw new Error( 'You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api-reference/store#subscribe(listener) for more details.' ) &#125; let isSubscribed = true ensureCanMutateNextListeners() nextListeners.push(listener) return function unsubscribe() &#123; if (!isSubscribed) &#123; return &#125; if (isDispatching) &#123; throw new Error( 'You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api-reference/store#subscribe(listener) for more details.' ) &#125; isSubscribed = false ensureCanMutateNextListeners() const index = nextListeners.indexOf(listener) nextListeners.splice(index, 1) &#125;&#125; è¿™é‡Œæˆ‘çœç•¥äº†ä¸€å †æ³¨é‡Šï¼Œå…¶å®žé‚£ä¸€å¤§æ®µæ³¨é‡Šå·²ç»è¯´çš„å¾ˆæ˜Žæ˜¾äº†ï¼Œæ³¨å†Œä¸€ä¸ª listener ç›‘å¬å‡½æ•°ï¼ŒæŠŠä»– push åˆ°å½“å‰çš„ç›‘å¬é‡Œåˆ—è¡¨ nextListener é‡Œé¢ï¼Œå¹¶è¿”å›žä¸€ä¸ª unsubscribe æ–¹æ³•ç”¨æ¥æ³¨é”€å½“å‰è¿™ä¸ªç›‘å¬å‡½æ•°ã€‚ä¹‹å‰ç‰ˆæœ¬è¿˜æ²¡æœ‰æ‰§è¡Œçš„æ—¶å€™é”€æ¯ä¼šæŠ¥é”™ï¼ŒçŽ°åœ¨å·²ç»ä¿®æ”¹äº†ã€‚ dispatch 12345678910111213141516171819202122232425262728293031323334function dispatch(action) &#123; if (!isPlainObject(action)) &#123; throw new Error( 'Actions must be plain objects. ' + 'Use custom middleware for async actions.' ) &#125; if (typeof action.type === 'undefined') &#123; throw new Error( 'Actions may not have an undefined "type" property. ' + 'Have you misspelled a constant?' ) &#125; if (isDispatching) &#123; throw new Error('Reducers may not dispatch actions.') &#125; try &#123; isDispatching = true currentState = currentReducer(currentState, action) &#125; finally &#123; isDispatching = false &#125; const listeners = (currentListeners = nextListeners) for (let i = 0; i &lt; listeners.length; i++) &#123; const listener = listeners[i] listener() &#125; return action&#125; dispatchç”¨æ¥åˆ†å‘ä¸€ä¸ª action æ¥æ”¹å˜å½“å‰çš„ state . ä¹Ÿæ˜¯å”¯ä¸€çš„æ”¹å˜ state çš„æ–¹æ³•ã€‚æŽ¥å—ä¸€ä¸ªç”¨æ¥æè¿°åŠ¨ä½œçš„ action ä¸ºå‚æ•°ï¼Œå¹¶ä¸”æŠŠè¿™ä¸ª action ä½œä¸ºå‡½æ•°çš„è¿”å›žå€¼ã€‚ä»Žä»£ç å‰é¢çš„åˆ¤æ–­å¯ä»¥çœ‹åˆ°ï¼Œaction å¿…é¡»æ˜¯ä¸€ä¸ªå­—é¢é‡å¯¹è±¡ï¼Œå¹¶ä¸”å¿…é¡»åŒ…å«ä¸€ä¸ª type çš„å±žæ€§ã€‚ å½“isDispatchingä¸ºçœŸçš„æ—¶å€™å¼€å§‹è§¦å‘å‡½æ•°ï¼Œè¿™é‡Œçš„ currentReducer æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä»–æŽ¥å—ä¸¤ä¸ªå‚æ•°ï¼šå½“å‰çŠ¶æ€ å’Œ actionï¼Œç„¶åŽè¿”å›žè®¡ç®—å‡ºæ¥çš„æ–°çš„çŠ¶æ€ï¼›ç„¶åŽéåŽ† nextListeners åˆ—è¡¨ï¼Œè°ƒç”¨æ¯ä¸ªç›‘å¬å‡½æ•°ï¼› replaceReducer 12345678function replaceReducer(nextReducer) &#123; if (typeof nextReducer !== 'function') &#123; throw new Error('Expected the nextReducer to be a function.') &#125; currentReducer = nextReducer dispatch(&#123; type: ActionTypes.REPLACE &#125;)&#125; è¿™ä¸ªå‡½æ•°å¯ä»¥æ›¿æ¢ store å½“å‰çš„ reducer å‡½æ•°ï¼Œé¦–å…ˆç›´æŽ¥æŠŠ currentReducer = nextReducerï¼Œç›´æŽ¥æ›¿æ¢ï¼›ç„¶åŽ dispatch({ type: ActionTypes.INIT }) ï¼Œç”¨æ¥åˆå§‹åŒ–æ›¿æ¢åŽ reducer ç”Ÿæˆçš„åˆå§‹åŒ–çŠ¶æ€å¹¶ä¸”èµ‹äºˆ store çš„çŠ¶æ€ï¼› observable 1234567891011121314151617181920212223242526272829303132function observable() &#123; const outerSubscribe = subscribe return &#123; /** * The minimal observable subscription method. * @param &#123;Object&#125; observer Any object that can be used as an observer. * The observer object should have a `next` method. * @returns &#123;subscription&#125; An object with an `unsubscribe` method that can * be used to unsubscribe the observable from the store, and prevent further * emission of values from the observable. */ subscribe(observer) &#123; if (typeof observer !== 'object' || observer === null) &#123; throw new TypeError('Expected the observer to be an object.') &#125; function observeState() &#123; if (observer.next) &#123; observer.next(getState()) &#125; &#125; observeState() const unsubscribe = outerSubscribe(observeState) return &#123; unsubscribe &#125; &#125;, [$$observable]() &#123; return this &#125; &#125;&#125; å¯¹äºŽè¿™ä¸ªå‡½æ•°ï¼Œæ˜¯ä¸ç›´æŽ¥æš´éœ²ç»™å¼€å‘è€…çš„ï¼Œå®ƒæä¾›äº†ç»™å…¶ä»–è§‚å¯Ÿè€…æ¨¡å¼ï¼å“åº”å¼åº“çš„äº¤äº’æ“ä½œï¼Œå…·ä½“å¯çœ‹https://github.com/zenparsing/es-observable æœ€åŽæ‰§è¡Œ dispatch({ type: ActionTypes.INIT })ï¼Œç”¨æ¥æ ¹æ® reducer åˆå§‹åŒ– store çš„çŠ¶æ€ã€‚ combineReducersè¿™ä¸ªæ¨¡å—ç”¨æ¥åˆå¹¶å¤šä¸ª reducers åˆ°ä¸€ä¸ª reducer,ä¸€èˆ¬æˆ‘ä»¬ä¼šåœ¨storeçš„reducers.jsæ–‡ä»¶å¤¹åˆå¹¶reducer12345678910111213import &#123; combineReducers &#125; from 'redux'import &#123; reducer as home &#125; from 'pages/home'import &#123; reducer as news &#125; from 'pages/news'import &#123; reducer as cart &#125; from 'pages/cart'import &#123; reducer as shop &#125; from 'pages/shop'export default combineReducers(&#123; home, news, cart, shop&#125;) è¿™ä¸ªæ¨¡å—ä¸­ä¸»è¦å®žçŽ°äº†ä¸‰ä¸ªæ–¹æ³• getUndefinedStateErrorMessageå¬ä»–çš„åå­—å°±çŸ¥é“äº† èŽ·å¾—æœªå®šä¹‰çŠ¶æ€çš„é”™è¯¯ä¿¡æ¯1234567891011function getUndefinedStateErrorMessage(key, action) &#123; const actionType = action &amp;&amp; action.type const actionDescription = (actionType &amp;&amp; `action "$&#123;String(actionType)&#125;"`) || 'an action' return ( `Given $&#123;actionDescription&#125;, reducer "$&#123;key&#125;" returned undefined. ` + `To ignore an action, you must explicitly return the previous state. ` + `If you want this reducer to hold no value, you can return null instead of undefined.` )&#125;getUnexpectedStateShapeWarningMessage 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647function getUnexpectedStateShapeWarningMessage( inputState, reducers, action, unexpectedKeyCache) &#123; const reducerKeys = Object.keys(reducers) const argumentName = action &amp;&amp; action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer' if (reducerKeys.length === 0) &#123; return ( 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.' ) &#125; if (!isPlainObject(inputState)) &#123; return ( `The $&#123;argumentName&#125; has unexpected type of "` + &#123;&#125;.toString.call(inputState).match(/\s([a-z|A-Z]+)/)[1] + `". Expected argument to be an object with the following ` + `keys: "$&#123;reducerKeys.join('", "')&#125;"` ) &#125; const unexpectedKeys = Object.keys(inputState).filter( key =&gt; !reducers.hasOwnProperty(key) &amp;&amp; !unexpectedKeyCache[key] ) unexpectedKeys.forEach(key =&gt; &#123; unexpectedKeyCache[key] = true &#125;) if (action &amp;&amp; action.type === ActionTypes.REPLACE) return if (unexpectedKeys.length &gt; 0) &#123; return ( `Unexpected $&#123;unexpectedKeys.length &gt; 1 ? 'keys' : 'key'&#125; ` + `"$&#123;unexpectedKeys.join('", "')&#125;" found in $&#123;argumentName&#125;. ` + `Expected to find one of the known reducer keys instead: ` + `"$&#123;reducerKeys.join('", "')&#125;". Unexpected keys will be ignored.` ) &#125;&#125; è¿™ä¸ªæ›´é•¿çš„åå­—æ›´å¥½ç†è§£äº† èŽ·å¾—ä¸æœŸæœ›çš„çŠ¶æ€ç±»åž‹è­¦å‘ŠæŠ¥å‘Š,è¯´æ˜Žè¾“å…¥çš„stateå°±ä¸æ˜¯ä¸€ä¸ªå­—é¢é‡å¯¹è±¡æˆ–è€…ç»“æž„ä¸å¯¹ã€‚ä¸”inputState çš„ key éƒ½åº”è¯¥åœ¨ reducer çš„è‡ªèº«å±žæ€§ï¼ˆOwnProperty, éžåŽŸåž‹é“¾ä¸Šçš„ï¼‰ä¸­ï¼Œå¹¶ä¸”ä¸èƒ½åœ¨ä¼ å…¥çš„ unexpectedKeyCache ä¸­ã€‚ assertReducerShape 123456789101112131415161718192021222324252627282930313233function assertReducerShape(reducers) &#123; Object.keys(reducers).forEach(key =&gt; &#123; const reducer = reducers[key] const initialState = reducer(undefined, &#123; type: ActionTypes.INIT &#125;) if (typeof initialState === 'undefined') &#123; throw new Error( `Reducer "$&#123;key&#125;" returned undefined during initialization. ` + `If the state passed to the reducer is undefined, you must ` + `explicitly return the initial state. The initial state may ` + `not be undefined. If you don't want to set a value for this reducer, ` + `you can use null instead of undefined.` ) &#125; if ( typeof reducer(undefined, &#123; type: ActionTypes.PROBE_UNKNOWN_ACTION() &#125;) === 'undefined' ) &#123; throw new Error( `Reducer "$&#123;key&#125;" returned undefined when probed with a random type. ` + `Don't try to handle $&#123; ActionTypes.INIT &#125; or other actions in "redux/*" ` + `namespace. They are considered private. Instead, you must return the ` + `current state for any unknown actions, unless it is undefined, ` + `in which case you must return the initial state, regardless of the ` + `action type. The initial state may not be undefined, but can be null.` ) &#125; &#125;)&#125; ç”¨æ¥ä¿è¯ä¼ å…¥çš„ reducers çš„ç»“æž„æ­£ç¡®ï¼Œä¹Ÿå°±è¯´è¯´æ¯ä¸ª reducer éƒ½å¿…é¡»åœ¨æ”¶åˆ° INIT action åŽè¿”å›žä¸€ä¸ªä¸ä¸º undefined çš„ initState ï¼Œå¹¶ä¸”è¿™ä¸ª action ä¸èƒ½åœ¨ reducer ä¸­ä¸“é—¨åŽ»å¤„ç†ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨ reducer é‡Œé¢ä¸€å®šè¦æŒ‡å®šé»˜è®¤è¿”å›žçš„ state çš„åŽŸå› . combineReducers 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263export default function combineReducers(reducers) &#123; const reducerKeys = Object.keys(reducers) const finalReducers = &#123;&#125; for (let i = 0; i &lt; reducerKeys.length; i++) &#123; const key = reducerKeys[i] if (process.env.NODE_ENV !== 'production') &#123; if (typeof reducers[key] === 'undefined') &#123; warning(`No reducer provided for key "$&#123;key&#125;"`) &#125; &#125; if (typeof reducers[key] === 'function') &#123; finalReducers[key] = reducers[key] &#125; &#125; const finalReducerKeys = Object.keys(finalReducers) let unexpectedKeyCache if (process.env.NODE_ENV !== 'production') &#123; unexpectedKeyCache = &#123;&#125; &#125; let shapeAssertionError try &#123; assertReducerShape(finalReducers) &#125; catch (e) &#123; shapeAssertionError = e &#125; return function combination(state = &#123;&#125;, action) &#123; if (shapeAssertionError) &#123; throw shapeAssertionError &#125; if (process.env.NODE_ENV !== 'production') &#123; const warningMessage = getUnexpectedStateShapeWarningMessage( state, finalReducers, action, unexpectedKeyCache ) if (warningMessage) &#123; warning(warningMessage) &#125; &#125; let hasChanged = false const nextState = &#123;&#125; for (let i = 0; i &lt; finalReducerKeys.length; i++) &#123; const key = finalReducerKeys[i] const reducer = finalReducers[key] const previousStateForKey = state[key] const nextStateForKey = reducer(previousStateForKey, action) if (typeof nextStateForKey === 'undefined') &#123; const errorMessage = getUndefinedStateErrorMessage(key, action) throw new Error(errorMessage) &#125; nextState[key] = nextStateForKey hasChanged = hasChanged || nextStateForKey !== previousStateForKey &#125; return hasChanged ? nextState : state &#125; combineReducer æŽ¥æ”¶ä¸€ä¸ªç”¨æ¥åˆå¹¶æˆä¸€ä¸ª reducer çš„å¯¹è±¡ï¼Œæ‰§è¡ŒåŽè¿”å›žä¸€ä¸ªå‡½æ•°ï¼Œä¹Ÿå³æ˜¯æˆ‘ä»¬çš„ rootReducer . é¦–å…ˆæŠŠä¼ å…¥çš„ reducers æŒ‰ key éåŽ†åŽèµ‹å€¼ç»™ finalReducers . ç„¶åŽè¿›è¡Œä¸€å †é”™è¯¯åˆ¤æ–­ï¼Œæœ€åŽè¿”å›žä¸€ä¸ªå‡½æ•° combination. ä¹Ÿå°±æ˜¯åˆå¹¶åŽçš„ reducer . æ€»ç»“&emsp;&emsp;ä»Šå¤©å…ˆçœ‹ç€ä¸¤ä¸ªï¼Œå§æ§½ï¼Œçœ‹æºç å¤ªçƒ§è„‘äº†ï¼Œæˆ‘ä¸ºä»€ä¹ˆè¦è£…è¿™ä¸ªé€¼ï¼Œå¤´å‘éƒ½æŽ‰æ²¡äº†ï¼Œ å…ˆåŽ»æžç‚¹è…°å­è¡¥ä¸€è¡¥ï¼Œæ’¤äº†ï¼ŒåŽé¢çš„ä»£ç æœªå®Œå¾…ç»­~]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>Redux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Immutable å¸¸ç”¨æ–¹æ³•]]></title>
    <url>%2F2018%2F12%2F02%2FImmutable%20%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[å‰è¨€ &emsp;&emsp;è¿™é‡Œä¸»è¦æ•´ç†ä¸€ä¸‹é¡¹ç›®ä¸­ç”¨åˆ°çš„ Immutable ç›¸å…³æ–¹æ³•ï¼Œç¬¬ä¸€æ¬¡ä½¿ç”¨å¯èƒ½æœ‰ç‚¹ç”Ÿç–ï¼Œè¿˜æ˜¯éœ€è¦å¯¹ç…§æ–‡æ¡£ã€‚ä½†æ˜¯éƒ¨åˆ†æ–¹æ³•ç¡®å®žé«˜æ•ˆï¼Œå°è£…äº†åŽŸç”Ÿ JS çš„æ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿé›†æˆäº† lodash çš„ä¸€äº›æ–¹æ³•ã€‚ Immutable å®˜ç½‘æ–‡æ¡£ Immutable å¸¸è§æ•°æ®ç±»åž‹ List: æœ‰åºç´¢å¼•é›†ï¼Œç±»ä¼¼ JavaScript ä¸­çš„ Arrayã€‚ Map: æ— åºç´¢å¼•é›†ï¼Œç±»ä¼¼ JavaScript ä¸­çš„ Objectã€‚ Seq: åºåˆ—ï¼Œä½†æ˜¯å¯èƒ½ä¸èƒ½ç”±å…·ä½“çš„æ•°æ®ç»“æž„æ”¯æŒã€‚ OrderedMap: æœ‰åºçš„ Mapï¼Œæ ¹æ®æ•°æ®çš„ set()è¿›è¡ŒæŽ’åºã€‚ Set: æ²¡æœ‰é‡å¤å€¼çš„é›†åˆã€‚ OrderedSet: æœ‰åºçš„ Setï¼Œæ ¹æ®æ•°æ®çš„ add è¿›è¡ŒæŽ’åºã€‚ Stack: æœ‰åºé›†åˆï¼Œæ”¯æŒä½¿ç”¨ unshiftï¼ˆï¼‰å’Œ shiftï¼ˆï¼‰æ·»åŠ å’Œåˆ é™¤ã€‚ Range(): è¿”å›žä¸€ä¸ª Seq.Indexed ç±»åž‹çš„é›†åˆï¼Œè¿™ä¸ªæ–¹æ³•æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œstart è¡¨ç¤ºå¼€å§‹å€¼ï¼Œé»˜è®¤å€¼ä¸º 0ï¼Œend è¡¨ç¤ºç»“æŸå€¼ï¼Œé»˜è®¤ä¸ºæ— ç©·å¤§ï¼Œstep ä»£è¡¨æ¯æ¬¡å¢žå¤§çš„æ•°å€¼ï¼Œé»˜è®¤ä¸º 1.å¦‚æžœ start = end,åˆ™è¿”å›žç©ºé›†åˆã€‚ Repeat(): è¿”å›žä¸€ä¸ª vSeq.Indexe ç±»åž‹çš„é›†åˆï¼Œè¿™ä¸ªæ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œvalue ä»£è¡¨éœ€è¦é‡å¤çš„å€¼ï¼Œtimes ä»£è¡¨è¦é‡å¤çš„æ¬¡æ•°ï¼Œé»˜è®¤ä¸ºæ— ç©·å¤§ã€‚ Record: ä¸€ä¸ªç”¨äºŽç”Ÿæˆ Record å®žä¾‹çš„ç±»ã€‚ç±»ä¼¼äºŽ JavaScript çš„ Objectï¼Œä½†æ˜¯åªæŽ¥æ”¶ç‰¹å®šå­—ç¬¦ä¸²ä¸º keyï¼Œå…·æœ‰é»˜è®¤å€¼ã€‚ Collection: æ˜¯æž„å»ºæ‰€æœ‰æ•°æ®ç»“æž„çš„åŸºç±»ï¼Œä¸å¯ä»¥ç›´æŽ¥æž„å»ºã€‚ å¸¸ç”¨API fromJS() ä½œç”¨ï¼šå°†ä¸€ä¸ª js æ•°æ®è½¬æ¢ä¸º Immutable ç±»åž‹çš„æ•°æ®ã€‚ç”¨æ³•ï¼šfromJS(value, converter)ç®€ä»‹ï¼šå°†ä¸€ä¸ªå¯¹è±¡è‡ªåŠ¨è½¬åŒ–æˆ Mapï¼Œå°†ä¸€ä¸ªæ•°ç»„è‡ªåŠ¨è½¬æ¢æˆ Listï¼Œåªèƒ½å®žçŽ°ä¸€å±‚çš„è½¬åŒ– 12345const defaultState = fromJS(&#123; total: 0, pay: false, selectAll: false&#125;) toJS() ä½œç”¨ï¼šå°†ä¸€ä¸ª Immutable æ•°æ®è½¬æ¢ä¸º JS ç±»åž‹çš„æ•°æ®ã€‚ç”¨æ³•ï¼švalue.toJS()ç®€ä»‹ï¼šå°†ä¸€ä¸ª Map è‡ªåŠ¨è½¬åŒ–æˆå¯¹è±¡ï¼Œå°†ä¸€ä¸ª List è‡ªåŠ¨è½¬æ¢æˆæ•°ç»„ï¼Œåªèƒ½å®žçŽ°ä¸€å±‚çš„è½¬åŒ– is() equals() ä½œç”¨ï¼šå¯¹ä¸¤ä¸ªå¯¹è±¡è¿›è¡Œæ¯”è¾ƒã€‚ç”¨æ³•ï¼šis(map1,map2) map1.equals(map2)ç®€ä»‹ï¼šè¿”å›žå€¼ä¸ºä¸€ä¸ª Booleanï¼Œå’ŒåŽŸç”Ÿ JS æ¯”è¾ƒä¸åŒçš„æ˜¯ï¼Œè¿™ä¸ªæ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„å­˜å‚¨åœ°å€ï¼Œå°±ç®—å€¼ç›¸åŒï¼Œå­˜å‚¨åœ°å€ä¸åŒï¼Œè¿”å›žå€¼ä¹Ÿæ˜¯ false ï¼Œå¯ä»¥ç”¨ â€˜===â€™å®žçŽ°ç›¸åŒåŠŸèƒ½ 123456const map1 = Map(&#123; a: 1, b: 2, c: 3&#125;)const map2 = Map(&#123; a: 1, b: 2, c: 3&#125;)console.log(map1.equals(map2)) // trueconsole.log(map1 == map2) // falseconsole.log(map1 === map2) // falseconsole.log(is(map1, map2) // true List Map ä½œç”¨ï¼šåˆ›å»º Immutable çš„ List å’Œ Map å¯¹è±¡ç”¨æ³•ï¼šList() Map() get() getIn() ä½œç”¨ï¼šèŽ·å–å¯¹è±¡çš„å…·ä½“å€¼ã€‚ç”¨æ³•ï¼šget(index: number): T | undefinedgetIn(searchKeyPath: Iterable, notSetValue?: any): anyç®€ä»‹ï¼šget()åªèƒ½æŸ¥æ‰¾ä¸€å±‚çš„ List æˆ–è€… Mapï¼ŒgetIn()å¯ä»¥å¯¹å¤šå±‚çš„ List æˆ–è€… Map è¿›è¡Œå–å€¼ï¼Œéœ€è¦ç”¨æ•°ç»„çš„æ–¹æ³•è¾“å…¥è·¯å¾„ã€‚ 12345const nested = fromJS(&#123; a: &#123; b: &#123; c: [ 3, 4, 5 ] &#125; &#125; &#125;)console.log(nested.get('a'))//Map &#123; "b": Map &#123; "c": List [ 3, 4, 5 ] &#125; &#125;console.log(nested.getIn([ 'a', 'b', 'c' , 0 ]))//3 set() setIn() ä½œç”¨ï¼šè®¾ç½®å¯¹è±¡çš„å…·ä½“å€¼ã€‚ç”¨æ³•ï¼šset(index: number, value: T): ListsetIn(keyPath: Iterable, value: any): thisç®€ä»‹ï¼šåŒä¸Š12345const nested = fromJS(&#123; a: &#123; b: &#123; c: [ 3, 4, 5 ] &#125; &#125; &#125;)console.log(nested.set('a',1))//Map &#123; "a" :1 &#125;console.log(nested.getIn([ 'a', 'b', 'c' , 0 ]),0)// Map &#123; "a": Map &#123; "b": Map &#123; "c": List [ 0, 4, 5 ] &#125; &#125; &#125; updateIn() ä½œç”¨ï¼šæ›´æ–°å¯¹è±¡çš„å…·ä½“å€¼ã€‚ç”¨æ³•ï¼šupdateIn(keyPath: Iterable,notSetValue: any,updater: (value: any) =&gt; any): thisupdateIn(keyPath: Iterable, updater: (value: any) =&gt; any): thisç®€ä»‹ï¼šæ›´æ–°ç›¸å…³å¯¹è±¡ï¼Œå›žè°ƒå‡½æ•°ä¸­å¤„ç†åŽè¿”å›žä¸€ä¸ªæ–°çš„çŠ¶æ€ã€‚1let newProducts1 = state.updateIn(['products'], list =&gt; list.push(1)) delete() deleteIn() ä½œç”¨ï¼šåˆ é™¤æ•°ç»„ä¸­çš„å€¼æˆ–è€…å¯¹è±¡çš„å±žæ€§ã€‚ç”¨æ³•ï¼šdelete(index: number): Listdelete(key: K): thisdeleteIn(keyPath: Iterable): this12list.delete(1);list.deleteIn([0,1]); groupBy() ä½œç”¨ï¼šå¯¹æ•°æ®è¿›è¡Œåˆ†ç»„12345678910111213const listOfMaps = List([ Map(&#123; v: 0 &#125;), Map(&#123; v: 1 &#125;), Map(&#123; v: 1 &#125;), Map(&#123; v: 0 &#125;), Map(&#123; v: 2 &#125;)])const groupsOfMaps = listOfMaps.groupBy(x =&gt; x.get('v'))// Map &#123;// 0: List [ Map&#123; "v": 0 &#125;, Map &#123; "v": 0 &#125; ],// 1: List [ Map&#123; "v": 1 &#125;, Map &#123; "v": 1 &#125; ],// 2: List [ Map&#123; "v": 2 &#125; ],// &#125; indexOf() lastIndexOf() ä½œç”¨ï¼šå’Œjsæ•°ç»„ä¸­çš„æ–¹æ³•ç›¸åŒï¼ŒæŸ¥æ‰¾ç¬¬ä¸€ä¸ªæˆ–è€…æœ€åŽä¸€ä¸ªvalueçš„indexå€¼ï¼Œæ‰¾ä¸åˆ°åˆ™è¿”å›ž-1ç®€ä»‹ï¼šMapä¸å­˜åœ¨æ­¤æ–¹æ³• findIndex() findLastIndex() ä½œç”¨ï¼šæŸ¥æ‰¾æ»¡è¶³è¦æ±‚çš„å…ƒç´ çš„indexå€¼ç®€ä»‹ï¼šMapä¸å­˜åœ¨æ­¤æ–¹æ³• Seq() ä½œç”¨ï¼šå°†é›†åˆè½¬åŒ–æˆseq123const &#123; Map &#125; = require('immutable')const map = Map(&#123; a: 1, b: 2, c: 3 &#125;const lazySeq = Seq(map) Seq å…è®¸æœ‰æ•ˆé“¾æŽ¥æ“ä½œï¼Œå…è®¸è¡¨è¾¾é€»è¾‘12345lazySeq .flip() .map(key =&gt; key.toUpperCase()) .flip()// Seq &#123; A: 1, B: 1, C: 1 &#125; æ€»ç»“&emsp;&emsp;æ€»ä½“æ¥è¯´ï¼ŒImmutableçš„ç”¨æ³•å¹¶æ²¡æœ‰è¿™ä¹ˆç¹çï¼Œåªè¦åœ¨ä½¿ç”¨çš„æ—¶å€™ä¿æŒæ¸…é†’çš„å¤´è„‘ï¼Œæ°¸è¿œè®°ä½æ“ä½œå®Œè¿”å›žä¸€ä¸ªæ–°çš„çŠ¶æ€ä¹…å¥½äº†ã€‚å…¶ä»–ä¸€äº›é›¶é›¶ç¢Žç¢Žçš„æ–¹æ³•åæ­£å’ŒåŽŸç”ŸJSç±»ä¼¼å•¦ï¼Œéªšå¹´ï¼Œå¾æœImmutableè¿™ä¸ªå°å¦–ç²¾å˜å¾—so easy!!!]]></content>
      <categories>
        <category>React</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•åœ¨React-Nativeä¸Šä½¿ç”¨Typescript]]></title>
    <url>%2F2018%2F12%2F01%2F%E5%A6%82%E4%BD%95%E5%9C%A8React-Native%E4%B8%8A%E4%BD%BF%E7%94%A8Typescript%2F</url>
    <content type="text"><![CDATA[åˆ›å»ºReact-Nativeé¡¹ç›® å®‰è£…è„šæ‰‹æž¶ yarn global add create-react-native-app åˆ›å»ºé¡¹ç›® create-react-native-app é¡¹ç›®åç§° è¿›å…¥é¡¹ç›®å¹¶å¯åŠ¨ cd xxxyarn start å¦‚æžœä¸ä½¿ç”¨Typescriptï¼ŒçŽ°åœ¨å°±å¯ä»¥ç»è¡ŒRNçš„é¡¹ç›®å¼€å‘äº†ï¼Œä½†æ˜¯è¦ä½¿ç”¨Typescriptï¼Œè¿˜éœ€è¦æŠ˜è…¾ä¸€ç•ªã€‚ é…ç½®Typescriptå¼€å‘ä¾èµ– å®‰è£…tsä¾èµ– è¿™é‡Œå®‰è£…tsè¯­è¨€ä¾èµ–ï¼ŒåŒæ—¶å°†reactçš„ä¸€äº›åŒ…å®‰è£…åˆ° @typesæ–‡ä»¶å¤¹å†…ï¼Œä¸ç„¶å†™reactä»£ç çš„æ—¶å€™ä¼šæŠ¥æ‰¾ä¸åˆ°reactåŒ…ä¾èµ– yarn add typescript tslint -Dyarn add @types/react @types/react-native @types/react-dom -D æˆ‘ä»¬è¿˜éœ€è¦concurrentlyæ¥å®žæ—¶ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼Œrimrafï¼Œå¹¶å‘åœ°æ¸…ç†ä»Žtsç¼–è¯‘è¿‡æ¥çš„jsæ–‡ä»¶çš„è¾“å‡ºæ–‡ä»¶å¤¹ï¼Œå¹¶å‘åœ°è¿è¡Œnpmè„šæœ¬. yarn add concurrently rimraf -D é…ç½®tsæ–‡ä»¶ åœ¨æ ¹ç›®å½•ä¸‹æ‰‹åŠ¨åˆ›å»ºtsconfig.jsonæ–‡ä»¶ï¼Œå°†ä¸‹é¢çš„ä»£ç ç›´æŽ¥å¤åˆ¶è¿›åŽ»123456789101112131415161718192021222324252627282930313233343536373839&#123; "compilerOptions": &#123; "module":"es2015", "target": "es2015", "jsx": "react", "rootDir": "src", "outDir": "build", "allowSyntheticDefaultImports": true, "noImplicitAny": true, "sourceMap": true, "experimentalDecorators": true, "preserveConstEnums": true, "allowJs": true, "noUnusedLocals": true, "noUnusedParameters": true, "noImplicitReturns": true, "skipLibCheck": true, "moduleResolution":"Node" &#125;, "filesGlob": [ "typings/index.d.ts", "src/**/*.ts", "src/**/*.tsx", "node_modules/typescript/lib/lib.es6.d.ts" ], "types": [ "react", "react-dom", "react-native" ], "exclude":[ "build", "node_modules", "jest.config.js", "App.js" ], "compileOnSave": false&#125; éœ€è¦æ³¨æ„ä¸€äº›ç»†èŠ‚ï¼š æˆ‘ä»¬å¸Œæœ›å°†Typescriptåº”ç”¨ç¨‹åºçš„æ‰€æœ‰ä»£ç å­˜å‚¨åœ¨srcæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å¤¹/å­æ–‡ä»¶å¤¹ä¸­ã€‚ç”¨â€œrootDirâ€:â€œsrcâ€œï¼Œç¡®ä¿ä½ çš„æ ¹ç›®å½•ä¸ºsrcæˆ–è€…ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ›´æ”¹ å¹¶æŠŠbabel.config.jsæ–‡ä»¶æ‰”åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹å†… å®‰è£…npmè„šæœ¬çš„ä¾èµ–ï¼Œæ–¹ä¾¿æ‰“åŒ…å’Œè¿è¡Œ yarn add react-native-scripts å°†package.jsonä¸­çš„scriptsä»£æ›¿ä¸ºä¸‹é¢çš„é…ç½®123456789101112131415161718'script':&#123; "start": "react-native-scripts start", "eject": "react-native-scripts eject", "android": "react-native-scripts android", "ios": "react-native-scripts ios", "test": "node node_modules/jest/bin/jest.js", "lint": "tslint src/**/*.ts", "tsc": "tsc", "clean": "rimraf build", "build": "yarn run clean &amp;&amp; yarn run tsc --", "watch": "yarn run build -- -w", "watchAndRunAndroid": "concurrently \"yarn run watch\" \"yarn run android\"", "buildRunAndroid": "yarn run build &amp;&amp; yarn run watchAndRunAndroid ", "watchAndRunIOS": "concurrently \"yarn run watch\" \"yarn run ios\"", "buildRunIOS": "yarn run build &amp;&amp; yarn run watchAndRunIOS ", "watchAndStart": "concurrently \"yarn run watch\" \"yarn run start\"", "buildAndStart": "yarn run build &amp;&amp; yarn run watchAndStart "&#125; å°†mainæ›´æ”¹ä¸ºï¼š â€œmainâ€:â€./node_modules/react-nativescripts/build/bin/crna-entry.jsâ€ è¿™æ„å‘³ç€æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä»Žè¿™ä¸ªcrna-entry.js å¼€å§‹ã€‚æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œä½ ä¼šå‘çŽ°å®ƒå¼•ç”¨äº†æˆ‘ä»¬çš„App.js var _App = require(â€˜../../../../Appâ€™); ä¿®æ”¹App.jsæ–‡ä»¶ 12import App from './build/App';export default App; æ³¨æ„åˆ›å»ºtypescriptæ–‡ä»¶åŽç¼€ä¸º.tsx å¯åŠ¨ä»»åŠ¡ è¿è¡Œå‘½ä»¤å³å¯,ç›´æŽ¥æ‰“åŒ…å¹¶ä¸”å¯åŠ¨ä»»åŠ¡ï¼Œè¿™å¯èƒ½éœ€è¦ä¸€äº›äº‹ä»¶ï¼Œå°‘ä¾ è¯·è€å¿ƒç­‰å€™ã€‚ yarn buildAndStart]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>React-Native</tag>
        <tag>Typescript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Immutable.jsä¹‹æˆ‘è§]]></title>
    <url>%2F2018%2F11%2F30%2FImmutable.js%E4%B9%8B%E6%88%91%E8%A7%81%2F</url>
    <content type="text"><![CDATA[å‰è¨€&emsp;&emsp;æœ¬æ–‡ä¸»è¦ä»‹ç»facebookæŽ¨å‡ºçš„ä¸€ä¸ªç±»åº“immutable.jsï¼Œä»¥åŠå¦‚ä½•å°†immutable.jsé›†æˆåˆ°æˆ‘çŽ°æœ‰çš„react+reduxæž¶æž„çš„ç§»åŠ¨ç«¯é¡¹ç›®ä¸­ã€‚ ä¸€.immutable.jsä»‹ç» åŽŸç”Ÿjsåœ¨reduxä¸­å¤„ç†æ•°æ®çš„å‘&emsp;&emsp;å‰ä¸¤å¤©åœ¨å¤„ç†è´­ç‰©è½¦çš„reduxé€»è¾‘çš„æ—¶å€™ï¼Œé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå…¨é€‰åé€‰çš„åŠŸèƒ½å’Œé€»è¾‘æ²¡æœ‰é—®é¢˜ï¼Œæ”¹å˜åŽçš„æ•°æ®åœ¨reducerä¸­æ‰“å°å‡ºæ¥ä¹Ÿå·²ç»æ˜¯æ­£ç¡®çš„æ”¹å˜ï¼Œä½†æ˜¯é¡µé¢ä¸­çš„å…ƒç´ å°±æ˜¯ä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼Œç”šè‡³ä¸ä¼šé‡æ–°æ‰§è¡Œrender()çš„ç”Ÿå‘½å‘¨æœŸã€‚123456789101112131415161718//èŽ·å–å­˜å‚¨çš„è´­ç‰©è½¦å•†å“ä¿¡æ¯let products = state.products//æ ¹æ®ä¼ å…¥çš„id æŸ¥æ‰¾å¹¶ä¿®æ”¹è¿™ä¸ªç‰©å“çš„é€‰ä¸­çŠ¶æ€for (let i = 0; i &lt; products.length; i++) &#123; if (products[i].id === action.id) &#123; products[i].select = action.isSelect break; &#125; else &#123; continue &#125;&#125;//è¿”å›žæ–°çš„çŠ¶æ€return &#123; ...state, products,&#125;&emsp;&emsp;ä¹ä¸€çœ‹å¥½åƒæ²¡æœ‰é—®é¢˜ï¼Œæ‰¾äº†å¥½ä¹…æ‰å‘çŽ°åœ¨reducerä¸­å¤„ç†æ•°æ®çš„æ—¶å€™ä½¿ç”¨äº†åœ°å€å¼•ç”¨ï¼Œå¯¼è‡´è¿”å›žçš„è¿˜æ˜¯åŽŸæ¥çš„å¯¹è±¡ï¼ŒçŠ¶æ€æ²¡æœ‰å‘ç”Ÿæ”¹å˜ã€‚Reactå¯¹äºŽçŠ¶æ€å˜åŒ–çš„æ„ŸçŸ¥æ˜¯å¿…é¡»è¿”å›žçš„æ–°å¯¹è±¡æ‰ä¼šå¼•èµ·çŠ¶æ€çš„å˜åŒ–ï¼Œä»Žè€ŒåŽ»æ¸²æŸ“é¡µé¢ã€‚ä¸‹é¢æ‰æ˜¯æ­£å¸¸çš„ä»£ç ã€‚12//èŽ·å–å­˜å‚¨çš„è´­ç‰©è½¦å•†å“ä¿¡æ¯let products = state.products&emsp;&emsp;åœ¨jsä¸­ï¼Œå¼•ç”¨ç±»åž‹çš„æ•°æ®ï¼Œä¼˜ç‚¹åœ¨äºŽé¢‘ç¹çš„æ“ä½œæ•°æ®éƒ½æ˜¯åœ¨åŽŸå¯¹è±¡çš„åŸºç¡€ä¸Šä¿®æ”¹ï¼Œä¸ä¼šåˆ›å»ºæ–°å¯¹è±¡ï¼Œä»Žè€Œå¯ä»¥æœ‰æ•ˆçš„åˆ©ç”¨å†…å­˜ï¼Œä¸ä¼šæµªè´¹å†…å­˜ï¼Œè¿™ç§ç‰¹æ€§ç§°ä¸ºmutableï¼ˆå¯å˜ï¼‰ï¼Œä½†æ°æ°å®ƒçš„ä¼˜ç‚¹ä¹Ÿæ˜¯å®ƒçš„ç¼ºç‚¹ï¼Œå¤ªè¿‡äºŽçµæ´»å¤šå˜åœ¨å¤æ‚æ•°æ®çš„åœºæ™¯ä¸‹ä¹Ÿé€ æˆäº†å®ƒçš„ä¸å¯æŽ§æ€§ï¼Œå‡è®¾ä¸€ä¸ªå¯¹è±¡åœ¨å¤šå¤„ç”¨åˆ°ï¼Œåœ¨æŸä¸€å¤„ä¸å°å¿ƒä¿®æ”¹äº†æ•°æ®ï¼Œå…¶ä»–åœ°æ–¹å¾ˆéš¾é¢„è§åˆ°æ•°æ®æ˜¯å¦‚ä½•æ”¹å˜çš„ï¼Œé’ˆå¯¹è¿™ç§é—®é¢˜çš„è§£å†³æ–¹æ³•ï¼Œä¸€èˆ¬å°±åƒåˆšæ‰çš„ä¾‹å­ï¼Œä¼šæƒ³å¤åˆ¶ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå†åœ¨æ–°å¯¹è±¡ä¸Šåšä¿®æ”¹ï¼Œè¿™æ— ç–‘ä¼šé€ æˆæ›´å¤šçš„æ€§èƒ½é—®é¢˜ä»¥åŠå†…å­˜æµªè´¹ã€‚ ä¸ºäº†è§£å†³è¿™ç§é—®é¢˜ï¼Œå‡ºçŽ°äº†immutableå¯¹è±¡ï¼Œæ¯æ¬¡ä¿®æ”¹immutableå¯¹è±¡éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ä¸å¯å˜å¯¹è±¡ï¼Œè€Œè€çš„å¯¹è±¡ä¸ä¼šæ”¹å˜ã€‚immutable.jsä»‹ç»immutable.jsä¸»è¦æœ‰ä¸‰å¤§ç‰¹æ€§ï¼š Persistent data structure ï¼ˆæŒä¹…åŒ–æ•°æ®ç»“æž„ï¼‰ ä¸€èˆ¬å¬åˆ°æŒä¹…åŒ–ï¼Œåœ¨ç¼–ç¨‹ä¸­ç¬¬ä¸€ååº”åº”è¯¥æ˜¯ï¼Œæ•°æ®å­˜åœ¨æŸä¸ªåœ°æ–¹ï¼Œéœ€è¦ç”¨åˆ°çš„æ—¶å€™å°±èƒ½ä»Žè¿™ä¸ªåœ°æ–¹æ‹¿å‡ºæ¥ç›´æŽ¥ä½¿ç”¨ ä½†è¿™é‡Œè¯´çš„æŒä¹…åŒ–æ˜¯å¦ä¸€ä¸ªæ„æ€ï¼Œç”¨æ¥æè¿°ä¸€ç§æ•°æ®ç»“æž„ï¼Œä¸€èˆ¬å‡½æ•°å¼ç¼–ç¨‹ä¸­éžå¸¸å¸¸è§ï¼ŒæŒ‡ä¸€ä¸ªæ•°æ®ï¼Œåœ¨è¢«ä¿®æ”¹æ—¶ï¼Œä»ç„¶èƒ½å¤Ÿä¿æŒä¿®æ”¹å‰çš„çŠ¶æ€ï¼Œä»Žæœ¬è´¨æ¥è¯´ï¼Œè¿™ç§æ•°æ®ç±»åž‹å°±æ˜¯ä¸å¯å˜ç±»åž‹ï¼Œä¹Ÿå°±æ˜¯immutable immutable.jsæä¾›äº†åä½™ç§ä¸å¯å˜çš„ç±»åž‹ï¼ˆListï¼ŒMapï¼ŒSetï¼ŒSeqï¼ŒCollectionï¼ŒRangeç­‰ï¼‰ structural sharing ï¼ˆç»“æž„å…±äº«ï¼‰ immutableä½¿ç”¨å…ˆè¿›çš„tries(å­—å…¸æ ‘)æŠ€æœ¯å®žçŽ°ç»“æž„å…±äº«æ¥è§£å†³æ€§èƒ½é—®é¢˜ï¼Œå½“æˆ‘ä»¬å¯¹ä¸€ä¸ªImmutableå¯¹è±¡è¿›è¡Œæ“ä½œçš„æ—¶å€™ï¼ŒImmutableJSä¼šåªcloneè¯¥èŠ‚ç‚¹ä»¥åŠå®ƒçš„ç¥–å…ˆèŠ‚ç‚¹ï¼Œå…¶ä»–ä¿æŒä¸å˜ï¼Œè¿™æ ·å¯ä»¥å…±äº«ç›¸åŒçš„éƒ¨åˆ†ï¼Œå¤§å¤§æé«˜æ€§èƒ½ã€‚* support lazy operation ï¼ˆæƒ°æ€§æ“ä½œï¼‰ è¿™é‡Œæœ‰ä¸€ä¸ªæ–°çš„æ•°æ®ç±»åž‹Seqï¼Œå®ƒæœ‰è·ŸåŽŸç”Ÿjsç±»ä¼¼çš„æ–¹æ³•ï¼Œä½†æ˜¯æ€§èƒ½å´è¿œè¿œä¼˜äºŽåŽŸç”Ÿjs123456789Immutable.Seq.of(1,2,3,4,5,6,7,8).filter(x=&gt;&#123; console.log('Immutableæ‰§è¡Œ') return x%2&#125;)[1,2,3,4,5,6,7,8].filter(x=&gt;&#123; console.log('åŽŸç”Ÿjsæ‰§è¡Œ') return x%2&#125;) ç»“æžœæ˜¯ä¸Šé¢çš„åªæ‰§è¡Œ3æ¬¡ï¼Œä¸‹é¢çš„ä»£ç æ‰§è¡Œäº†8æ¬¡ã€‚ é‚£ä¹ˆå¯¹äºŽé«˜é¢‘çŽ‡çš„å¤§é‡æ•°æ®å¤„ç†ï¼Œè¿™å°±æ„å‘³ç€æ€§èƒ½çš„ä¼˜åŒ–ã€‚immutable.jsçš„ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ é™ä½Žmutableå¸¦æ¥çš„å¤æ‚åº¦ï¼Œç”šè‡³å¯ä»¥çœç•¥loadshæˆ–è€…underscoreçš„å¼•å…¥ èŠ‚çœå†…å­˜ åŽ†å²è¿½æº¯æ€§ï¼ˆæ—¶é—´æ—…è¡Œï¼‰ï¼šæ—¶é—´æ—…è¡ŒæŒ‡çš„æ˜¯ï¼Œæ¯æ—¶æ¯åˆ»çš„å€¼éƒ½è¢«ä¿ç•™äº†ï¼Œæƒ³å›žé€€åˆ°å“ªä¸€æ­¥åªè¦ç®€å•çš„å°†æ•°æ®å–å‡ºå°±è¡Œï¼Œæƒ³ä¸€ä¸‹å¦‚æžœçŽ°åœ¨é¡µé¢æœ‰ä¸ªæ’¤é”€çš„æ“ä½œï¼Œæ’¤é”€å‰çš„æ•°æ®è¢«ä¿ç•™äº†ï¼Œåªéœ€è¦å–å‡ºå°±è¡Œï¼Œè¿™ä¸ªç‰¹æ€§åœ¨reduxæˆ–è€…fluxä¸­ç‰¹åˆ«æœ‰ç”¨ æ‹¥æŠ±å‡½æ•°å¼ç¼–ç¨‹ï¼šimmutableæœ¬æ¥å°±æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„æ¦‚å¿µï¼Œçº¯å‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹ç‚¹å°±æ˜¯ï¼Œåªè¦è¾“å…¥ä¸€è‡´ï¼Œè¾“å‡ºå¿…ç„¶ä¸€è‡´ï¼Œç›¸æ¯”äºŽé¢å‘å¯¹è±¡ï¼Œè¿™æ ·å¼€å‘ç»„ä»¶å’Œè°ƒè¯•æ›´æ–¹ä¾¿ ç¼ºç‚¹ éœ€è¦é‡æ–°å­¦ä¹ api å®¹æ˜“ä¸ŽåŽŸç”Ÿå¯¹è±¡æ··æ·†ï¼šç”±äºŽapiä¸ŽåŽŸç”Ÿä¸åŒï¼Œæ··ç”¨çš„è¯å®¹æ˜“å‡ºé”™ã€‚ äºŒ.react+reduxä¸­é›†æˆimmutable.jså®žè·µ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨reduxä¸­é›†æˆimmutable Reactæœ‰ä¸€ä¸ªå¥‡æ€ªçš„ä»¤äººå‘æŒ‡çš„ç‰¹æ€§ï¼Œå½“ä¸€ä¸ªç»„ä»¶æ›´æ–°çš„æ—¶å€™ï¼Œä»–çš„å­ç»„ä»¶æˆ–è€…çˆ¶ç»„ä»¶éƒ½ä¼šå‘ç”Ÿæ›´æ–°ï¼Œå¯èƒ½ä½ åªæ˜¯ä¿®æ”¹äº†ä¸€ä¸ªå•é€‰é’®çš„æ ·å¼ï¼Œä½†æ˜¯ç‰µä¸€å‘åŠ¨å…¨èº«ï¼Œå¯èƒ½å˜åŒ–çš„æ˜¯100ä¸ªç»„ä»¶ï¼Œæ‰€ä»¥reactæœ‰ä¸ªé‡è¦çš„æ€§èƒ½ä¼˜åŒ–çš„ç‚¹å°±æ˜¯shouldComponentUpdateã€‚zçˆ±è¿™ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­ä¸­ï¼Œéœ€è¦å¯¹æ•°æ®è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æžœæ•°æ®å¾ˆå¤§ï¼Œå±‚æ¬¡å¾ˆæ·±ï¼Œé åŽŸç”ŸJSæ–¹æ³•é€å±‚æ¯”è¾ƒï¼Œå¯èƒ½å·²ç»åäº†ï¼Œä½†æ˜¯immutable.js,è¶…çº§ç®€ã€‚1a===b æ˜Žç¡®è¾¹ç•Œ åœ¨reduxä¸­ï¼Œå…¨å±€stateå¿…é¡»æ˜¯immutableçš„ï¼Œè¿™ç‚¹æ¯‹åº¸ç½®ç–‘æ˜¯æˆ‘ä»¬ä½¿ç”¨immutableæ¥ä¼˜åŒ–reduxçš„æ ¸å¿ƒ ç»„ä»¶propsæ˜¯é€šè¿‡reduxçš„connectä»Žstateä¸­èŽ·å¾—çš„ï¼Œå¹¶ä¸”å¼•å…¥immutableJSçš„å¦ä¸€ä¸ªç›®çš„æ˜¯å‡å°‘ç»„ä»¶shouldComponentUpdateä¸­ä¸å¿…è¦æ¸²æŸ“ï¼ŒshouldComponentUpdateä¸­æ¯”å¯¹çš„æ˜¯propsï¼Œå¦‚æžœpropsæ˜¯åŽŸç”ŸJSå°±å¤±åŽ»äº†ä¼˜åŒ–çš„æ„ä¹‰ ç»„ä»¶å†…éƒ¨stateå¦‚æžœéœ€è¦æäº¤åˆ°storeçš„ï¼Œå¿…é¡»æ˜¯immutableï¼Œå¦åˆ™ä¸å¼ºåˆ¶ viewæäº¤åˆ°actionä¸­çš„æ•°æ®å¿…é¡»æ˜¯immutable Actionæäº¤åˆ°reducerä¸­çš„æ•°æ®å¿…é¡»æ˜¯immutable reducerä¸­æœ€ç»ˆå¤„ç†stateå¿…é¡»æ˜¯ä»¥immutableçš„å½¢å¼å¤„ç†å¹¶è¿”å›ž ä¸ŽæœåŠ¡ç«¯ajaxäº¤äº’ä¸­è¿”å›žçš„callbackç»Ÿä¸€å°è£…ï¼Œç¬¬ä¸€æ—¶é—´è½¬æ¢æˆimmutableæ•°æ® ä½ ä½“éªŒè¿‡ç»æœ›ä¹ˆï¼Œåªè¦ä½ é€‰æ‹©äº†immutable.jsï¼Œå¯¹ä¸èµ·è¯·å¿˜è®°åŽŸç”Ÿjsï¼Œä¸ç„¶ä½ å†™é¡¹ç›®çš„æ—¶å€™å¯èƒ½å°±å‡‰å‡‰äº†ã€‚ å…·ä½“æ³¨å…¥æ–¹æ¡ˆ reduxä¸­ï¼Œç¬¬ä¸€æ­¥è‚¯å®šåˆ©ç”¨combineReducersæ¥åˆå¹¶reducerå¹¶åˆå§‹åŒ–stateï¼Œreduxè‡ªå¸¦çš„combineReducersåªæ”¯æŒstateæ˜¯åŽŸç”Ÿjså½¢å¼çš„ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨redux-immutableæä¾›çš„combineReducersæ¥æ›¿æ¢åŽŸæ¥çš„æ–¹æ³•12345678910import &#123;combineReducers&#125; from 'redux-immutable';import &#123;reducer as shop&#125; from './shop';import &#123;reducer as cart&#125; from './cart';import &#123;reducer as news&#125; from './news'; const rootReducer = combineReducers(&#123; shop, cart, news,&#125;); reducerä¸­çš„initialStateè‚¯å®šä¹Ÿéœ€è¦åˆå§‹åŒ–æˆimmutableç±»åž‹ 12345678const defaultState = &#123; products : Immutable.Map(&#123;&#125;);&#125;export default (state = defaultState, action) =&gt; &#123; switch (action.type) &#123; case SET_ERROR: &#125;&#125; ä¸‰. æ€»ç»“ æ€»çš„æ¥è¯´immutable.jsçš„å‡ºçŽ°è§£å†³äº†è®¸å¤šåŽŸç”Ÿjsçš„ç—›ç‚¹ï¼Œå¹¶ä¸”è‡ªèº«å¯¹æ€§èƒ½æ–¹é¢åšäº†è®¸å¤šçš„ä¼˜åŒ–å¤„ç†ï¼Œè€Œä¸”immuable.jsä½œä¸ºå’ŒreactåŒæœŸæŽ¨å‡ºçš„ä¸€ä¸ªäº§å“ï¼Œå®Œç¾Žçš„å¥‘åˆäº†react+reduxçš„stateæµå¤„ç†ï¼Œreduxçš„å®—æ—¨å°±æ˜¯å•ä¸€æ•°æ®æµï¼Œå¯è¿½æº¯ï¼Œè¿™ä¸¤ç‚¹æ°æ°æ˜¯immutable.jsçš„ä¼˜åŠ¿ï¼Œè‡ªç„¶æ°´åˆ°æ¸ æˆï¼Œä½•ä¹è€Œä¸ä¸ºã€‚ å½“ç„¶ä¹Ÿä¸æ˜¯æ‰€æœ‰ä½¿ç”¨react+reduxçš„åœºæ™¯éƒ½éœ€è¦ä½¿ç”¨immutable.jsï¼Œå»ºè®®æ»¡è¶³é¡¹ç›®è¶³å¤Ÿå¤§ï¼Œstateç»“æž„è¶³å¤Ÿå¤æ‚çš„åŽŸåˆ™ï¼Œå°é¡¹ç›®å¯ä»¥æ‰‹åŠ¨å¤„ç†shouldComponentUpdateï¼Œä¸å»ºè®®ä½¿ç”¨ï¼Œå¾—ä¸å¿å¤±ã€‚ å€Ÿé‰´äºŽbig old]]></content>
      <categories>
        <category>React</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[socket.ioå®žçŽ°ä¿¡æ¯æŽ¨é€]]></title>
    <url>%2F2018%2F11%2F01%2Fsocket-io%E5%AE%9E%E7%8E%B0%E4%BF%A1%E6%81%AF%E6%8E%A8%E9%80%81%2F</url>
    <content type="text"><![CDATA[WebSocketæ˜¯html5æ–°å¢žåŠ çš„ä¸€ç§é€šä¿¡åè®®ï¼Œç›®å‰æµè¡Œçš„æµè§ˆå™¨éƒ½æ”¯æŒè¿™ä¸ªåã€‚ä½†æ˜¯ä»Šå¤©çš„ä¸»è§’socket.ioå°†Websocketå’Œè½®è¯¢ ï¼ˆPollingï¼‰æœºåˆ¶ä»¥åŠå…¶å®ƒçš„å®žæ—¶é€šä¿¡æ–¹å¼å°è£…æˆäº†é€šç”¨çš„æŽ¥å£ï¼Œå¹¶ä¸”åœ¨æœåŠ¡ç«¯å®žçŽ°äº†è¿™äº›å®žæ—¶æœºåˆ¶çš„ç›¸åº”ä»£ç ã€‚ç›¸æ¯”è¾ƒä¹‹ä¸‹ï¼Œä½¿ç”¨å®ƒåšå®žæ—¶ï¼ŒåŒå‘å’ŒåŸºäºŽäº‹ä»¶çš„é€šä¿¡æ›´åŠ æ–¹ä¾¿ã€‚ socket.ioå®˜ç½‘ å‡†å¤‡å·¥ä½œ ä½¿ç”¨expressè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªåŽå°æ–‡ä»¶ç›®å½•(å‰ææ˜¯ä½ å·²ç»å®‰è£…äº†(express),æˆ‘ä¹ æƒ¯ç”¨ejsæ¨¡æ¿ï¼Œè™½ç„¶åŽé¢ç”¨ä¸åˆ°ã€‚ 1express --view=ejs å®‰è£… socket.ioï¼Œå‹æƒ…æç¤ºè¯·åœ¨ç½‘ç»œè´¨é‡è‰¯å¥½çš„æƒ…å†µä¸‹è¿›è¡Œ 1yarn add socket.io èµ·æ­¥ ç”±äºŽå®˜ç½‘ä¸Šæä¾›çš„æ¡ˆä¾‹è·Ÿæˆ‘çš„éœ€æ±‚å‡ºå…¥ï¼Œè¯·æ±‚çš„æ˜¯åŽç«¯èµ„æºã€‚æˆ‘çš„é¡¹ç›®æ˜¯å‰åŽç«¯åˆ†ç¦»éƒ¨ç½²ï¼ŒåŽå°æ•°æ®æ›´æ–°åŽï¼Œç»™ç”¨æˆ·ä½¿ç”¨çš„ç§»åŠ¨ç«¯æ•°æ®è¿›è¡Œæ›´æ–°æŽ¨é€ã€‚æˆ‘è®©åŽå°å’Œç§»åŠ¨ç«¯é¡¹ç›®åŒæ—¶åŽ»ç›‘å¬å¦å¤–ä¸€ä¸ªæŽ¥å£ï¼Œé€šè¿‡è¿™ä¸ªæŽ¥å£ä½œä¸ºä¸€ä¸ªæ¡¥æ¢ï¼Œå®žçŽ°å‰åŽç«¯é€šä¿¡ã€‚ åŽç«¯åˆå§‹åŒ–ï¼Œå¯åŠ¨ä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨ï¼Œç«¯å£å·ä¸º9002 (è¿™ä¸ªç«¯å£åº”è¯¥æ²¡äººç”¨å§~) 123var server = require('http').createServer();var io = require('socket.io')(server);server.listen(9002); å‰ç«¯åˆå§‹åŒ–ï¼Œå¼•å…¥socket.io çš„js æ–‡ä»¶ï¼Œç„¶åŽåˆ›å»ºä¸€ä¸ªioå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¹Ÿç›‘å¬ç€æœ¬åœ°çš„9002ç«¯å£ã€‚ 12&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"&gt;&lt;/script&gt;var socket = io('http://localhost:9002'); å®žçŽ°é€šä¿¡ åŽç«¯é€šè¿‡ç›‘å¬socket.io æä¾›çš„äº‹ä»¶ï¼Œç›‘å¬ç”¨æˆ·çš„çŠ¶æ€ 123456789//ç”¨æˆ·è¿žæŽ¥io.on('connection', function(socket)&#123; console.log('a user connected'); //ç”¨æˆ·æ–­å¼€è¿žæŽ¥ socket.on('disconnect', function()&#123; console.log('user disconnected'); &#125;);&#125;); é€šè¿‡ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶ï¼Œå®žçŽ°é€šä¿¡ å‰ç«¯ï¼Œå®šä¹‰äº‹ä»¶ 1socket.emit('chat message', "hello world"); åŽå°ï¼Œæ•èŽ·äº‹ä»¶ 123456io.on('connection', function(socket)&#123; //ç›‘å¬å‰ç«¯chat messageäº‹ä»¶ï¼Œå¦‚æžœè§¦å‘ï¼Œå°±åœ¨åŽå°æ‰“å°ä¼ é€’çš„msg socket.on('chat message', function(msg)&#123; console.log('message: ' + msg); &#125;);&#125;); å¹¿æ’­,å¯ä»¥ç»™é™¤äº†æœ¬äººå¤–çš„æ‰€æœ‰äººå‘é€ä¸€æ¡ä¿¡æ¯123io.on('connection'ï¼Œfunction(socket) &#123; socket.broadcast.emit('hi'); &#125;); ok,æ–°æŠ€èƒ½getï¼æ’¸ä»£ç äº†ðŸ˜­]]></content>
      <categories>
        <category>Node.js</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨ Hexo æ­å»ºå±žäºŽè‡ªå·±çš„åšå®¢ï¼ˆäºŒï¼‰]]></title>
    <url>%2F2018%2F10%2F05%2F%E4%BD%BF%E7%94%A8-Hexo-%E6%90%AD%E5%BB%BA%E5%B1%9E%E4%BA%8E%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%BA%8C%EF%BC%89%2F</url>
    <content type="text"><![CDATA[è¯´å®žè¯ï¼Œç³»ç»Ÿæä¾›çš„ä¸»é¢˜çœ‹èµ·æ¥çœŸçš„ä¸‘ï¼Œæ‰¾æ¥æ‰¾åŽ»å‘çŽ°ï¼Œnextè¿™ä¸ªä¸»é¢˜è¿˜æ˜¯å¯ä»¥çš„ï¼Œä½Žè°ƒå¥¢åŽæœ‰å†…æ¶µï¼Œå°±å¾ˆé€‚åˆæˆ‘è¿™ç§é«˜ç«¯å¤§æ°”ä¸Šæ¡£æ¬¡çš„boyã€‚æŽ¥ä¸‹æ¥æˆ‘å°±è¯´è¯´æ€Žä¹ˆä½¿ç”¨nextä¸»é¢˜æ‰“é€ ä¸€ä¸ªç‹‚æ‹½ç‚«é…·åŠç‚¸å¤©çš„ä¸ªäººåšå®¢ï¼Œé¡ºä¾¿poä¸€ä¸‹è‡ªå·±åœ¨æ­å»ºè¿‡ç¨‹ä¸­é‡åˆ°ä¸€äº›çš„é—®é¢˜å’Œçˆ¬å‘è¿‡ç¨‹ã€‚ nextå…¥é—¨ å®‰è£…ä¸»é¢˜ åœ¨hexoæ–‡ä»¶å¤¹çš„æ ¹ç›®å½•ä¸‹ï¼Œä½¿ç”¨git ä¸‹è½½æœ€æ–°çš„nextä¸»é¢˜ git clone https://github.com/iissnan/hexo-theme-next themes/next å¯ç”¨ä¸»é¢˜ï¼Œåœ¨hexo çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œä¿®æ”¹å­—æ®µthemeçš„å€¼ä¸ºnext éªŒè¯ä¸»é¢˜ï¼Œåœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œä¸‹åˆ—ä»£ç ï¼Œå¦‚æžœæ²¡æœ‰æŠ¥é”™ï¼Œå°±æŒ‰ç…§æ˜¾ç¤ºçš„åœ°å€åœ¨æœ¬åœ°æŸ¥çœ‹åšå®¢å§ã€‚ hexo s è®¾ç½®ä¸»é¢˜nextä¸­æœ‰4ä¸ªä¸»é¢˜ï¼Œå¯ä»¥é€šè¿‡é€‰æ‹© Scheme ï¼Œä¿®æ”¹nextçš„ä¸»é¢˜æ ·å¼ï¼Œä¸€ä¸ªä¸€ä¸ªåŽ»è¯•å°±å¥½äº†ï¼Œæˆ‘è¿˜æ˜¯è§‰å¾—Piscesæ¯”è¾ƒå¹²å‡€ã€‚ è®¾ç½®è¯­è¨€ç¼–è¾‘hexoçš„é…ç½®æ–‡ä»¶ï¼Œ å°†å­—æ®µ language è®¾ç½®æˆä½ æ‰€éœ€è¦çš„è¯­è¨€ï¼Œä¿®æ”¹å®ŒæˆåŽéœ€è¦é‡æ–°ç¼–è¯‘é™æ€æ–‡ä»¶ã€‚ä¹¡ä¸‹äººè‹±è¯­ä¸å¥½ï¼Œè¿˜æ˜¯ç®€ä½“ä¸­æ–‡çœ‹ç€èˆ’æœã€‚ language: zh-Hans ç›®å‰ NexT æ”¯æŒçš„è¯­è¨€å¦‚ä»¥ä¸‹è¡¨æ ¼æ‰€ç¤ºï¼š è®¾ç½®èœå•ç¼–è¾‘hexoçš„é…ç½®æ–‡ä»¶ï¼Œ å°†å­—æ®µ menuä¸‹æ‰“å¼€éœ€è¦å±žæ€§ã€‚||å‰é¢æ˜¯å¯¹åº”çš„é¡µé¢ï¼ŒåŽé¢æ˜¯iconå°å›¾æ ‡åç§°ï¼Œä½¿ç”¨çš„æ˜¯fontawesomeå›¾æ ‡åº“ï¼Œç›´æŽ¥åŽ»fontawesomeå®˜ç½‘æ‰¾å§ï¼ŒæŠŠåå­—å¤åˆ¶è¿‡æ¥æ›¿æ¢å³å¯ã€‚ menu: home: / || home about: /about/ || user categories: /categories/ || th tags: /tags/ || tags archives: /archives/ || archive æœ‰äº›æ–°å»ºçš„èœå•é€‰é¡¹å¯èƒ½æ²¡æœ‰æ–‡ä»¶å¤¹ï¼Œåœ¨ç‚¹å‡»æ—¶ä¼šæŠ¥404é¡µé¢ï¼Œéœ€è¦æ‰‹åŠ¨åˆ›å»ºæ–‡ä»¶å¤¹ã€‚å¯ä»¥åœ¨hexoæ ¹ç›®å½•ä¸‹æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ hexo new page â€œç›®å½•åç§°â€ è®¾ç½®å¤´åƒå’Œç½‘ç«™çš„faviconå›¾æ ‡ç¼–è¾‘nextæ–‡ä»¶å¤¹ä¸­çš„ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼ˆ_config.ymlï¼‰ï¼Œ ä¿®æ”¹å­—æ®µ avatarå’Œfaviconï¼Œ å€¼è®¾ç½®æˆå¤´åƒçš„é“¾æŽ¥åœ°å€ã€‚æˆ‘ä¸€èˆ¬æŠŠå›¾ç‰‡æ”¾åœ¨hexoæ ¹ç›®å½•çš„sourceæ–‡ä»¶å¤¹ä¸‹è‡ªå·±åˆ›å»ºçš„imageæ–‡ä»¶å¤¹ä¸­ã€‚ è®¾ç½®ä¾§è¾¹æ ç¤¾äº¤é“¾æŽ¥å’ŒæŽ¨èé“¾æŽ¥æ‰“å¼€ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼ˆ_config.ymlï¼‰æœç´¢social_icons:,åœ¨fontawesomeå®˜ç½‘æ‰¾å–œæ¬¢çš„å°å›¾æ ‡ï¼Œå°†åå­—å¤åˆ¶åœ¨å¦‚ä¸‹ä½ç½®ã€‚æœç´¢linksï¼šï¼Œåœ¨è¿™é‡Œå¯ä»¥æ·»åŠ æŽ¨èé˜…è¯»çš„é“¾æŽ¥ï¼Œå¦‚ä¸‹å›¾ nextè¿›é˜¶ ç½‘ç«™åº•éƒ¨åŠ ä¸Šè®¿é—®é‡ æ‰“å¼€\themes\next\layout\_partials\footer.swigæ–‡ä»¶,åœ¨copyrightå‰åŠ ä¸Šç”»çº¢çº¿è¿™å¥è¯ ç„¶åŽå†åˆé€‚çš„ä½ç½®æ·»åŠ æ˜¾ç¤ºç»Ÿè®¡çš„ä»£ç 123456&lt;div class="powered-by"&gt; &lt;i class="fa fa-user-md"&gt;&lt;/i&gt; &lt;span id="busuanzi_container_site_uv"&gt; æœ¬ç«™è®¿å®¢æ•°:&lt;span id="busuanzi_value_site_uv"&gt;&lt;/span&gt; &lt;/span&gt;&lt;/div&gt; åœ¨è¿™é‡Œæœ‰ä¸¤ä¸­ä¸åŒè®¡ç®—æ–¹å¼çš„ç»Ÿè®¡ä»£ç ï¼š pvçš„æ–¹å¼ï¼Œå•ä¸ªç”¨æˆ·è¿žç»­ç‚¹å‡»nç¯‡æ–‡ç« ï¼Œè®°å½•næ¬¡è®¿é—®é‡ uvçš„æ–¹å¼ï¼Œå•ä¸ªç”¨æˆ·è¿žç»­ç‚¹å‡»nç¯‡æ–‡ç« ï¼Œåªè®°å½•1æ¬¡è®¿å®¢æ•°æ³¨æ„è¿™ä¸ªä¸œè¥¿åœ¨æœ¬åœ°æœåŠ¡å™¨ä¸Šçš„æ•°æ®éƒ½æ˜¯å‡çš„ï¼Œåªæœ‰çº¿ä¸ŠæœåŠ¡å™¨æ‰æ˜¯çœŸå®žæ•°æ®ã€‚å¼•å…¥ç½‘æ˜“äº‘éŸ³ä¹ æˆ‘ä»¬å¯ä»¥é€šè¿‡ç½‘æ˜“äº‘æä¾›çš„å¤–é“¾æ’­æ”¾å™¨ï¼Œè®©è‡ªå·±çš„åšå®¢è‡ªåŠ¨æ’­æ”¾éŸ³ä¹ã€‚å°†ä¸‹é¢çš„ä»£ç å¤åˆ¶åˆ°è‡ªå·±æƒ³è¦æ”¾ç½®æ’­æ”¾å™¨çš„åœ°æ–¹ è¿™ä¸ªæ’­æ”¾å™¨å¯ä»¥æ”¾åœ¨ä»»ä½•åœ°æ–¹ã€‚æˆ‘é€‰æ‹©æ”¾åœ¨ä¾§è¾¹æ ä¸­ã€‚1234&lt;div id="music163player"&gt; &lt;iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=280 height=86 src="https://music.163.com/outchain/player?type=2&amp;id=38358214&amp;auto=0&amp;height=66"&gt; &lt;/iframe&gt;&lt;/div&gt; æ³¨æ„ è¿™é‡Œå¤åˆ¶ä¸‹æ¥çš„åœ°å€ä¸­srcæ˜¯æ²¡æœ‰https:çš„ éœ€è¦è‡ªå·±æ·»åŠ ï¼Œä¸ç„¶æ— æ³•ç”Ÿæˆæ’­æ”¾å™¨ï¼Œè¿™ä¸ªå‘æˆ‘çˆ¬äº†ä¸€ä¸ªæ™šä¸Šâ€¦ å®žçŽ°ç»Ÿè®¡åŠŸèƒ½ä½¿ç”¨hexo-wordcountæ’ä»¶ï¼Œå®žçŽ°åšå®¢å­—æ•°å’Œé˜…è¯»æ—¶é—´çš„ç»Ÿè®¡åœ¨hexoæ ¹ç›®å½•ä¸‹æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼Œå®‰è£…æ’ä»¶ npm install hexo-wordcount â€“save ç„¶åŽåœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­æ‰¾åˆ°post_wordcountï¼Œå°†éœ€è¦çš„ä¸œè¥¿æ”¹æˆtrueï¼Œå³å¯å®žçŽ°è¯¥åŠŸèƒ½ã€‚ é˜…è¯»æ¬¡æ•°ç»Ÿè®¡æˆ‘æ˜¯ä½¿ç”¨leancloudæ¥å®žçŽ°é˜…è¯»æ¬¡æ•°çš„ç»Ÿè®¡ã€‚é¦–å…ˆéœ€è¦åŽ»leancloudå®˜ç½‘æ³¨å†Œä¸€ä¸‹æ³¨å†Œå®ŒæˆåŽï¼Œè¿›å…¥æŽ§åˆ¶å°ï¼Œç‚¹å‡»ç®­å¤´æŒ‡å‘çš„ä¸œè¥¿åœ¨å­˜å‚¨ä¸­åˆ›å»ºä¸€ä¸ªç±» Counter å¿…é¡»æ˜¯è¿™ä¸ªå‘½åç„¶åŽèŽ·å–appidå’Œappkeyå°†è¿™ä¸¤ä¸ªå€¼æ”¾åˆ°ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­leancloud_visitorsä¸‹å¯¹åº”çš„å­—æ®µ1234leancloud_visitors: enable: true app_id: yourapp_id app_key: yourapp_key æœ€åŽåœ¨å®‰å…¨ä¸­å¿ƒä¸­ï¼Œè®¾ç½®Web å®‰å…¨åŸŸååŒæ ·è¿™ä¸ªæ•°æ®åœ¨æœ¬åœ°æ˜¯æ— æ³•è®¡ç®—çš„ï¼Œè€Œä¸”ä¼šæŠ¥é”™ï¼Œåªæœ‰ä¸Šçº¿åŽæ‰èƒ½è®¡ç®—æ¯æ¬¡æµè§ˆçš„æ¬¡æ•°ã€‚ è®¾ç½®è¯„è®ºåŠŸèƒ½ç½‘ä¸Šæœ‰ä¸€å¤§å †å¼€æºçš„è¯„è®ºæ’ä»¶ï¼Œç±»ä¼¼æ¥å¿…åŠ›(éŸ©å›½æ£’å­å‡ºå“ï¼Œè¿™ä¸æŠµåˆ¶ä¸€ä¸‹ï¼Ÿï¼‰ã€ç•…è¨€ã€å‹è¨€ã€‚æœ€åŽå‘çŽ°ä¸Šé¢ä¸€ä¸ªleancloudä¹Ÿå¯ä»¥ç”¨æ¥åšè¯„è®ºï¼Œåªä¸è¿‡éœ€è¦é…åˆValineä¸€èµ·ä½¿ç”¨ã€‚ ä¸‹è½½æœ€æ–°çš„Valine.min.jsæ ¸å¿ƒä»£ç åº“åˆ°æœ¬åœ° å°†ä¸‹è½½å¥½çš„ Valine.min.js æ”¾ç½®äºŽ next\source\js\src\ä¸‹ æ‰“å¼€valineé…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®,valineé…ç½®æ–‡ä»¶è·¯å¾„ï¼šnext\layout\_third-party\comments\valine.swig if theme.valine.enable and theme.valine.appid and theme.valine.appkey %&#125;123456789101112131415161718192021222324252627282930313233343536 &lt;script src=&quot;//cdn1.lncld.net/static/js/3.0.4/av-min.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;//unjkp.com/valine/dist/Valine.min.js&quot;&gt;&lt;/script&gt; //åˆ é™¤Valineæ ¸å¿ƒä»£ç åº“å¤–é“¾è°ƒç”¨ &lt;script src=&quot;/js/src/Valine.min.js&quot;&gt;&lt;/script&gt; //è°ƒç”¨åˆšä¸‹è½½çš„æœ¬åœ°æ–‡ä»¶ä»¥åŠ é€ŸåŠ è½½é€Ÿåº¦ &#123;% set valine_uri = &apos;/js/src/Valine.min.js&apos; %&#125; //è¿™é‡Œæ”¹ä¸ºä»Žæœ¬åœ°åŠ è½½ &#123;% if theme.vendors.valine %&#125; &#123;% set valine_uri = theme.vendors.valine %&#125; &#123;% endif %&#125; &lt;script src=&quot;&#123;&#123; valine_uri &#125;&#125;&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot;&gt; var GUEST = [&apos;nick&apos;,&apos;mail&apos;,&apos;link&apos;]; var guest = &apos;&#123;&#123; theme.valine.guest_info &#125;&#125;&apos;; guest = guest.split(&apos;,&apos;).filter(function (item) &#123; return GUEST.indexOf(item)&gt;-1; &#125;); new Valine(&#123; el: &apos;#comments&apos; , verify: &#123;&#123; theme.valine.verify &#125;&#125;, notify: &#123;&#123; theme.valine.notify &#125;&#125;, appId: &apos;&#123;&#123; theme.valine.appid &#125;&#125;&apos;, appKey: &apos;&#123;&#123; theme.valine.appkey &#125;&#125;&apos;, placeholder: &apos;&#123;&#123; theme.valine.placeholder &#125;&#125;&apos;, avatar:&apos;&#123;&#123; theme.valine.avatar &#125;&#125;&apos;, guest_info:[&apos;nick&apos;] , //è¯„è®ºè€…åªéœ€è¦æä¾›è¯„è®ºçš„æ˜µç§°å³å¯ pageSize:&apos;&#123;&#123; theme.valine.pageSize &#125;&#125;&apos; || 10, &#125;); //å¢žåŠ ä»¥ä¸‹å…­è¡Œä»£ç åŽ»é™¤ power by valine var infoEle = document.querySelector(&apos;#comments .info&apos;); if (infoEle &amp;&amp; infoEle.childNodes &amp;&amp; infoEle.childNodes.length &gt; 0)&#123; infoEle.childNodes.forEach(function(item) &#123; item.parentNode.removeChild(item); &#125;); &#125; &lt;/script&gt;&#123;% endif %&#125; ç„¶åŽåŽ»ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œä¿®æ”¹ï¼Œä¸‹é¢æ˜¯æˆ‘çš„é…ç½® 12345678910111213# Valine.# You can get your appid and appkey from https://leancloud.cn# more info please open https://valine.js.orgvaline: enable: true //æ‰“å¼€valineè¯„è®ºåŠŸèƒ½ appid: ä½ çš„leancloud appid appkey: ä½ çš„leancloud appkey notify: false //é‚®ä»¶æé†’ verify: true //è¯„è®ºæ—¶æ˜¯å¦æœ‰éªŒè¯ç ï¼Œéœ€è¦åœ¨Leancloud è®¾ç½®-&gt;å®‰å…¨ä¸­å¿ƒ ä¸­æ‰“å¼€ placeholder: è¯´ç‚¹ä»€ä¹ˆå§ï¼ //è¯„è®ºæ¡†é»˜è®¤æ˜¾ç¤º avatar: hide //è¯„è®ºè€…çš„å¤´åƒ,æˆ‘è¿™é‡Œè®¾ç½®çš„ä¸æ˜¾ç¤º guest_info: nick # custom comment header pageSize: 10 # pagination size ä¸‹é¢æ˜¯æ•ˆæžœå›¾ ä¸ºåšå®¢åŠ ä¸ŠèŒèŒçš„å® ç‰©è¿™ä¸ªä¹Ÿæ˜¯åœ¨æ‰¾èµ„æ–™çš„æ—¶å€™å‘çŽ°çš„ï¼Œè™½ç„¶å¾ˆå¥½çœ‹ï¼Œä½†æ˜¯è·Ÿé‚£ä¸ªcanvasèƒŒæ™¯å›¾ä¸€æ ·ï¼Œæœ‰ç‚¹å èµ„æºï¼Œå¯èƒ½ä¼šå¯¼è‡´ç½‘ç«™æ‰“å¼€æœ‰ç‚¹æ…¢ã€‚ä¸‹é¢æ˜¯è®¾ç½®æ–¹æ³•ã€‚ åœ¨hexoæ ¹ç›®å½•ä¸‹å®‰è£…æ’ä»¶ npm install -save hexo-helper-live2d å® ç‰©æ ·å¼åˆ—è¡¨ï¼Œé€‰æ‹©ä½ å–œæ¬¢çš„èŒå¦¹å­æˆ–è€…å°åŠ¨ç‰©ï¼Œç„¶åŽå®‰è£…ã€‚ npm install live2d-widget-model-â€œå® ç‰©ä»£ç â€ åœ¨hexoçš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸‹åˆ—é…ç½®1234567891011live2d: enable: true scriptFrom: local model: use: live2d-widget-model-z16 display: position: right width: 100 height: 150 mobile: show: true æˆ‘è¿™ä¸ªåœ¨æœ¬åœ°è¿è¡Œå¥½åƒä¸æ˜¯å¾ˆæµç•…ï¼Œå»ºè®®æŠŠmobileè®¾ç½®ä¸ºfalseï¼Œå› ä¸ºæ‰‹æœºä¸ŠçœŸçš„å¥½å ä½ç½®ã€‚ã€‚ã€‚ä¸‹é¢æ˜¯æ•ˆæžœå›¾åˆ«é—®æˆ‘ä¸ºå•¥é€‰è¿™ä¸ªï¼Œè€å­æ™•å¥¶ï¼ï¼ï¼ å¥½äº†ï¼Œæš‚æ—¶å†™è¿™ä¹ˆå¤šå§ï¼Œæ„Ÿè§‰è¿˜æœ‰å¥½å¤šå‘æ²¡æœ‰å†™è¿›æ¥ã€‚å†™å®Œäº†è¿˜æ˜¯è›®æœ‰æˆå°±æ„Ÿçš„ï¼Œè‡³å°‘å¯¹å¾—èµ·æŽ‰ä¸‹çš„è¿™ä¹ˆå¤šå¤´å‘äº†ã€‚ã€‚ã€‚]]></content>
      <categories>
        <category>Hexo æ­å»ºåšå®¢</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨ Hexo æ­å»ºå±žäºŽè‡ªå·±çš„åšå®¢ï¼ˆä¸€ï¼‰]]></title>
    <url>%2F2018%2F09%2F30%2F%E4%BD%BF%E7%94%A8%20Hexo%20%E6%90%AD%E5%BB%BA%E5%B1%9E%E4%BA%8E%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%80%EF%BC%89%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘å¿ƒè¡€æ¥æ½®ï¼Œçªç„¶æƒ³æžä¸€ä¸ªè‡ªå·±çš„åšå®¢ï¼Œè™½ç„¶å¾ˆæ—©ä¹‹å‰æŒ‰å°±åœ¨åšå®¢å›­ä¸Šæ³¨å†Œè¿‡ï¼Œæ€»æ„Ÿè§‰æœ‰é‚£ä¹ˆä¸€ä¸¢ä¸¢lowã€‚ç½‘ä¸ŠæŸ¥äº†æŸ¥ï¼Œå‘çŽ°Wordpresshå’ŒHexoéƒ½è¿˜è¡Œï¼Œéƒ½æ”¯æŒå®‰è£…è‡ªå®šä¹‰ä¸»é¢˜ã€‚Wordpresséœ€è¦æœ¬åœ°çš„æ•°æ®åº“å’Œæ”¯æŒåŽå°æ“ä½œï¼Œç›¸æ¯”è¾ƒä¸‹Hexoæ›´åŠ è½»é‡çº§ï¼Œé‚£å°±è¿™ä¹ˆæ„‰å¿«çš„å†³å®šäº†ï¼Œletâ€™s get itï¼ å‡†å¤‡å·¥ä½œ å®‰è£…Node.jså’Œé…ç½®å¥½Node.jsçŽ¯å¢ƒã€‚ å®‰è£…Gitå’Œé…ç½®å¥½GitçŽ¯å¢ƒã€‚ ç”³è¯·githubè´¦å·ï¼ŒåŽé¢éœ€è¦å°†é¡¹ç›®ä¸Šä¼ è‡³githubä¸Šï¼Œä½¿ç”¨å®ƒçš„æœåŠ¡å™¨ä¸Šçº¿ã€‚ å®‰è£…Hexo å…¨å±€å®‰è£…Hexoï¼Œåœ¨è‡ªå·±è®¤ä¸ºåˆé€‚çš„åœ°æ–¹åˆ›ä¸ªæ–‡ä»¶å¤¹ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ç›®å½•ä¸‹æ‰“å¼€å‘½ä»¤è¡Œï¼Œæ‰§è¡Œä¸‹åˆ—ä»£ç ã€‚ 1npm install hexo -g æ£€æŸ¥hexoæ˜¯å¦å®‰è£…æˆåŠŸï¼Œå¦‚æžœå‡ºå…¥ä¸€å¤§å †ç‰ˆæœ¬å·ï¼Œå°±æ˜¯æˆåŠŸäº†ã€‚ 1hexo -v åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹åˆå§‹åŒ–hexo 1hexo init çœ‹åˆ°åŽé¢çš„â€œStart blogging with Hexoï¼â€ï¼Œå°±ä»£è¡¨æˆåŠŸå’§ï¼Œæ¿€ä¸æ¿€åŠ¨å™»ï¼ å®‰è£…hexoè¿è¡Œæ‰€éœ€è¦çš„ç»„å»ºï¼Œå»ºè®®åœ¨ç½‘ç»œå¥½çš„æƒ…å†µä¸‹è¿›è¡Œï¼Œä¸ç„¶ä¸¢åŒ…å‡ºé”™çœŸçš„ä¸å¥½æŸ¥ã€‚ã€‚ã€‚ 1npm install ç¼–è¾‘é™æ€æ–‡ä»¶ï¼Œæ‰‹ä¸è¦è´±ï¼Œç­‰ç€å°±è¡Œã€‚ 1hexo g å¯åŠ¨hexoæœ¬åœ°æœåŠ¡å™¨ï¼Œæ ¹æ®æç¤ºåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€ã€‚ 1hexo s å¦‚æžœç«¯å£å·è¢«å ç”¨ï¼Œæ‰§è¡Œä¸‹åˆ—ä»£ç 1hexo server -p ç«¯å£å· å¦‚æžœå‡ºçŽ°ä¸‹å›¾å°±ä»£è¡¨æˆåŠŸäº† å…³è”github ç¡®ä¿è‡ªå·±ä½¿ç”¨çš„ç”µè„‘å·²ç»æœ‰ç”Ÿæˆå…¬é’¥å’Œå¯†é’¥ï¼Œå¹¶ä¸”åœ¨githubä¸Šå·²ç»è®¾ç½®å¥½ã€‚æµ‹è¯•è¿žæŽ¥ä»£ç å¦‚ä¸‹ã€‚ 1ssh -T git@github.com åœ¨githubä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“ï¼Œé¡¹ç›®å¿…é¡»è¦éµå®ˆæ ¼å¼ï¼šè´¦æˆ·å.github.ioï¼Œä¸ç„¶ä¸èƒ½ä½¿ç”¨å®ƒæœ¬èº«æä¾›çš„æœåŠ¡å™¨ã€‚ é…ç½®Deployment,åœ¨æ ¹ç›®å½•ä¸‹æ‰¾åˆ°_config.ymlæ–‡ä»¶,ä¿®æ”¹deployï¼Œä¸€èˆ¬åœ¨æ–‡ä»¶çš„æœ€åŽé¢ã€‚repositoryåŽé¢æ”¹æˆè‡ªå·±ä»“åº“çš„SSHé“¾æŽ¥åœ°å€ã€‚ 1234deploy: type: git repository: git@github.com:hzy1735/hzy1735.github.io.git branch: master å®‰è£…ä¸€ä¸ªæ¨¡å—ï¼Œç”¨æ¥è¿›è¡Œè‡ªåŠ¨æ‰“åŒ…æäº¤ã€‚ 1npm install hexo-deployer-git --save åˆ¶å®šæ‰“åŒ…æäº¤å‘½ä»¤ 1hexo d -g å¦‚æžœæ²¡æœ‰errorï¼Œå°±æ˜¯éƒ¨ç½²æˆåŠŸäº†ï¼Œè¾“å…¥http://ç”¨æˆ·å.github.ioï¼Œå³å¯æµè§ˆè‡ªå·±çš„åšå®¢äº† ç¼–å†™åšå®¢ åœ¨æ ¹ç›®å½•ä¸‹ï¼Œå‘½ä»¤è¡Œä¸­è¾“å…¥ä¸‹åˆ—ä»£ç ï¼Œè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªåŽç¼€ä¸ºmdçš„æ–‡ä»¶ 1hexo new post â€œåšå®¢åâ€ ç”±äºŽHexoçš„åšå®¢éƒ½æ˜¯mdæ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦å­¦ä¸€ä¸‹mdçš„è¯­æ³•ï¼Œå…¶å®žå¾ˆç®€å•ï¼Œè‡ªè¡Œç™¾åº¦åŽ»å§ã€‚æˆ‘æ˜¯ç”¨vscodeç¼–å†™çš„ï¼Œå®‰è£…ä¸€ä¸ªMarkdown Preview Enhancedæ’ä»¶ï¼Œå°±å¯ä»¥é¢„è§ˆå†™å‡ºæ¥çš„ä¸œè¥¿ï¼ŒvscodeçœŸç‰›é€¼ï¼ï¼ï¼ ç¼–å†™å®ŒæˆåŽï¼Œåœ¨æ‰§è¡Œæ‰“åŒ…æäº¤ä»£ç ï¼Œå°±èƒ½å¯¹çº¿ä¸Šçš„åšå®¢è¿›è¡Œæ›´æ–°äº†ã€‚1hexo d -g ä»¥ä¸Šå°±æ˜¯å®‰è£…hexoå’Œä¸Šçº¿çš„æ“ä½œå’¯ï¼ŒæŽ¥ä¸‹æ¥è¿˜æœ‰æ›´é«˜çº§çš„æ“ä½œå’§ã€‚]]></content>
      <categories>
        <category>Hexo æ­å»ºåšå®¢</category>
      </categories>
  </entry>
</search>
